!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var t={},r={},n={},i={}.hasOwnProperty,o=/^\.\.?(\/|$)/,a=function(e,t){for(var r,n=[],i=(o.test(t)?e+"/"+t:t).split("/"),a=0,s=i.length;a<s;a++)".."===(r=i[a])?n.pop():"."!==r&&""!==r&&n.push(r);return n.join("/")},s=function(e){return e.split("/").slice(0,-1).join("/")},u=function(t,n){var i,o={id:t,exports:{},hot:d&&d.createHot(t)};return r[t]=o,n(o.exports,(i=t,function(t){var r=a(s(i),t);return e.require(r,i)}),o),o.exports},c=function(e){var t=n[e];return t&&e!==t?c(t):e},l=function(e,n){null==n&&(n="/");var o=c(e);if(i.call(r,o))return r[o].exports;if(i.call(t,o))return u(o,t[o]);throw new Error("Cannot find module '"+e+"' from '"+n+"'")};l.alias=function(e,t){n[t]=e};var f=/\.[^.\/]+$/,h=/\/index(\.[^\/]+)?$/;l.register=l.define=function(e,o){if(e&&"object"==typeof e)for(var a in e)i.call(e,a)&&l.register(a,e[a]);else t[e]=o,delete r[e],function(e){if(f.test(e)){var t=e.replace(f,"");i.call(n,t)&&n[t].replace(f,"")!==t+"/index"||(n[t]=e)}if(h.test(e)){var r=e.replace(h,"");i.call(n,r)||(n[r]=e)}}(e)},l.list=function(){var e=[];for(var r in t)i.call(t,r)&&e.push(r);return e};var d=e._hmr&&new e._hmr(function(e,t){return c(a(s(e),t))},l,t,r);l._cache=r,l.hmr=d&&d.wrap,l.brunch=!0,e.require=l}}(),function(){"undefined"==typeof window||window;var e=function(e,t,r){var n={},i=function(t,r){try{return e(r+"/node_modules/"+t)}catch(e){if(-1===e.toString().indexOf("Cannot find module"))throw e;if(-1!==r.indexOf("node_modules")){var o=r.split("/"),a=o.lastIndexOf("node_modules"),s=o.slice(0,a).join("/");return i(t,s)}}return n};return function(o){if(o in t&&(o=t[o]),o){if("."!==o[0]&&r){var a=i(o,r);if(a!==n)return a}return e(o)}}};require.register("curvature/base/Bag.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bag=void 0;var e=r("./Bindable");function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.meta=Symbol("meta"),this.content=new Map,this.list=e.Bindable.makeBindable({}),this.current=0,this.type=void 0,this.changeCallback=r}var r,i,o;return r=t,(i=[{key:"has",value:function(e){return this.content.has(e)}},{key:"add",value:function(e){if(void 0===e||!(e instanceof Object))throw new Error("Only objects may be added to Bags.");if(this.type&&!(e instanceof this.type))throw console.error(this.type,e),new Error("Only objects of type ".concat(this.type," may be added to this Bag."));if(!this.content.has(e)){var r,n=(r=this.current++,Number(r).toString(36));this.content.set(e,n),this.list[n]=e,this.changeCallback&&this.changeCallback(e,this.meta,t.ITEM_ADDED,n)}}},{key:"remove",value:function(e){if(void 0===e||!(e instanceof Object))throw new Error("Only objects may be removed from Bags.");if(this.type&&!(e instanceof this.type))throw console.error(this.type,e),new Error("Only objects of type ".concat(this.type," may be removed from this Bag."));if(!this.content.has(e))return this.changeCallback&&this.changeCallback(e,this.meta,0,void 0),!1;var r=this.content.get(e);return delete this.list[r],this.content.delete(e),this.changeCallback&&this.changeCallback(e,this.meta,t.ITEM_REMOVED,r),e}},{key:"items",value:function(){return Array.from(this.content.entries()).map(function(e){return e[0]})}}])&&n(r.prototype,i),o&&n(r,o),t}();t.Bag=i,Object.defineProperty(i,"ITEM_ADDED",{configurable:!1,enumerable:!1,writable:!0,value:1}),Object.defineProperty(i,"ITEM_REMOVED",{configurable:!1,enumerable:!1,writable:!0,value:-1})}()}),require.register("curvature/base/Bindable.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(t,n,i){return(e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&r(o,n.prototype),o}).apply(null,arguments)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function n(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Bindable=void 0;var s,u,c,l=Symbol("ref"),f=Symbol("original"),h=Symbol("deck"),d=Symbol("binding"),v=Symbol("subBinding"),p=Symbol("bindingAll"),y=Symbol("isBindable"),m=Symbol("wrapping"),b=Symbol("executing"),g=Symbol("stack"),w=(Symbol("object"),Symbol("wrapped")),k=Symbol("unwrapped"),_=Symbol("getProto"),S=Symbol("onGet"),O=Symbol("onAllGet"),j=Symbol("bindChain"),P=Object.getPrototypeOf(Int8Array),T=window||{},A=[T.Node,T.File,T.Map,T.Set,T.ArrayBuffer,T.ResizeObserver,T.MutationObserver,T.PerformanceObserver,T.IntersectionObserver].filter(function(e){return"function"==typeof e}),x=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var r,i,s;return r=t,s=[{key:"isBindable",value:function(e){return!(!e||!e[y])&&e[y]===t}},{key:"onDeck",value:function(e,t){return e[h][t]||!1}},{key:"ref",value:function(e){return e[l]||!1}},{key:"makeBindable",value:function(e){return this.make(e)}},{key:"shuck",value:function(e,r){r=r||new Map;var n={};if(e instanceof P||e instanceof ArrayBuffer){var i=e.slice(0);return r.set(e,i),i}var a=Object.keys(e);for(var s in a){var u=a[s];if("___"!==u.substring(0,3)){var c=r.get(e[u]);if(c)n[u]=c;else if(e[u]!==e){if(e[u]&&"object"===o(e[u])){var l=e[u];t.isBindable(e[u])&&(l=e[u][f]),n[u]=this.shuck(l,r)}else n[u]=e[u];r.set(e[u],n[u])}else r.set(e[u],n),n[u]=n}}return t.isBindable(e)&&(delete n.bindTo,delete n.isBound),n}},{key:"make",value:function(r){var i=this;if(!r||!["function","object"].includes(o(r)))return r;if(A.filter(function(e){return r instanceof e}).length||Object.isSealed(r)||!Object.isExtensible(r))return r;if(r[l])return r;if(r[d])return r;Object.defineProperty(r,l,{configurable:!0,enumerable:!1,writable:!0,value:r}),Object.defineProperty(r,f,{configurable:!1,enumerable:!1,writable:!1,value:r}),Object.defineProperty(r,h,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(r,d,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(r,v,{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(r,p,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(r,y,{configurable:!1,enumerable:!1,writable:!1,value:t}),Object.defineProperty(r,b,{enumerable:!1,writable:!0}),Object.defineProperty(r,m,{enumerable:!1,writable:!0}),Object.defineProperty(r,g,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(r,"___before___",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(r,"___after___",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(r,w,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(r,k,{configurable:!1,enumerable:!1,writable:!1,value:{}});Object.defineProperty(r,"bindTo",{configurable:!1,enumerable:!1,writable:!1,value:function e(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=!1;if(Array.isArray(n)){var c=n.map(function(t){return e(t,a,s)});return function(){return c.map(function(e){return e()})}}if(n instanceof Function&&(s=a||{},a=n,u=!0),s.delay>=0&&(a=i.wrapDelayCallback(a,s.delay)),s.throttle>=0&&(a=i.wrapThrottleCallback(a,s.throttle)),s.wait>=0&&(a=i.wrapWaitCallback(a,s.wait)),s.frame&&(a=i.wrapFrameCallback(a,s.frame)),s.idle&&(a=i.wrapIdleCallback(a)),u){var l=r[p].length;if(r[p].push(a),!("now"in s)||s.now)for(var f in r)a(r[f],f,r,!1);return function(){delete r[p][l]}}r[d][n]||(r[d][n]=[]);var h=r[d][n].length;if(s.children){var y=a;a=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var a=n[0],u=r[v].get(y);if(u&&(r[v].delete(y),u()),"object"===o(a)){var c=t.make(a);t.isBindable(c)&&r[v].set(y,c.bindTo(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return y.apply(void 0,n.concat(t))},Object.assign({},s,{children:!1}))),y.apply(void 0,n)}else y.apply(void 0,n)}}r[d][n].push(a),"now"in s&&!s.now||a(r[n],n,r,!1);var m=!1,b=function(){var e=r[v].get(a);e&&(r[v].delete(a),e()),m||(m=!0,r[d][n]&&delete r[d][n][h])};return s.removeWith&&s.removeWith instanceof View&&s.removeWith.onRemove(function(){return b}),b}});Object.defineProperty(r,j,{configurable:!1,enumerable:!1,writable:!1,value:function(e,t){var n=e.split("."),o=n.shift(),a=n.slice(0),s=[];return s.push(r.bindTo(o,function(e,r,n,o){var u=a.join(".");0!==a.length?(void 0===e&&(e=n[r]=i.makeBindable({})),s=s.concat(e[j](u,t))):t(e,r,n,o)})),function(){return s.map(function(e){return e()})}}}),Object.defineProperty(r,"___before",{configurable:!1,enumerable:!1,writable:!1,value:function(e){var t=r.___before___.length;r.___before___.push(e);var n=!1;return function(){n||(n=!0,delete r.___before___[t])}}}),Object.defineProperty(r,"___after",{configurable:!1,enumerable:!1,writable:!1,value:function(e){var t=r.___after___.length;r.___after___.push(e);var n=!1;return function(){n||(n=!0,delete r.___after___[t])}}});Object.defineProperty(r,"isBound",{configurable:!1,enumerable:!1,writable:!1,value:function(){for(var e in r[p])if(r[p][e])return!0;for(var t in r[d])for(var n in r[d][t])if(r[d][t][n])return!0;return!1}});var a=function(e){r[e]&&r[e]instanceof Object&&!r[e]instanceof Promise&&(A.filter(function(t){return r[e]instanceof t}).length||!Object.isExtensible(r[e])||Object.isSealed(r[e])||(r[e]=t.make(r[e])))};for(var s in r)a(s);return Object.defineProperty(r,l,{configurable:!1,enumerable:!1,writable:!1,value:new Proxy(r,{get:function(n,i){if(i===l||i===f||"apply"===i||"isBound"===i||"bindTo"===i||"__proto__"===i)return n[i];var o=Object.getOwnPropertyDescriptor(r,i);return!o||o.configurable||o.writable?r[O]?r[O](i):!r[S]||i in r?n[w][i]?n[w][i]:!o||o.configurable||o.writable?"function"==typeof n[i]?(Object.defineProperty(n[k],i,{configurable:!1,enumerable:!1,writable:!1,value:n[i]}),n[w][i]=t.make(function(){var t,o=r instanceof Promise||r instanceof Map||r instanceof Set||"function"==typeof Date&&r instanceof Date||"function"==typeof P&&r instanceof P||"function"==typeof ArrayBuffer&&r instanceof ArrayBuffer||"function"==typeof EventTarget&&r instanceof EventTarget||"function"==typeof ResizeObserver&&r instanceof ResizeObserver||"function"==typeof MutationObserver&&r instanceof MutationObserver||"function"==typeof PerformanceObserver&&r instanceof PerformanceObserver||"function"==typeof IntersectionObserver&&r instanceof IntersectionObserver?r:r[l];n[b]=i,n[g].unshift(i);for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];for(var c in n.___before___)n.___before___[c](n,i,n[g],r,s);for(var f in t=new.target?e(n[k][i],s):Object.getPrototypeOf(n)[i]===n[i]?n[i].apply(o||r,s):n[i].apply(n,s),n.___after___)n.___after___[f](n,i,n[g],r,s);return n[b]=null,n[g].shift(),t}),n[w][i]):n[i]:(n[w][i]=n[i],n[w][i]):r[S](i):n[i]},set:function(e,n,i){if(n===f)return!0;if(void 0!==r[h][n]&&r[h][n]===i)return!0;if("string"==typeof n&&"___"===n.substring(0,3)&&"___"===n.slice(-3))return!0;if(e[n]===i)return!0;for(var o in i&&i instanceof Object&&(A.filter(function(e){return r instanceof e}).length||!Object.isExtensible(r)||Object.isSealed(r)||(i=t.makeBindable(i))),r[h][n]=i,r[p])r[p][o]&&r[p][o](i,n,e,!1);var a=!1;if(n in r[d])for(var s in r[d][n])r[d][n]&&r[d][n][s]&&!1===r[d][n][s](i,n,e,!1,e[n])&&(a=!0);if(delete r[h][n],!a){var u=Object.getOwnPropertyDescriptor(e,n);e instanceof File&&"lastModifiedDate"==n||u&&!u.writable||e[n]!==i||(e[n]=i)}return Reflect.set(e,n,i)},construct:function(r,i){var o="constructor";for(var a in r.___before___)r.___before___[a](r,o,r[g],void 0,i);var s=t.make(e(r[f],n(i)));for(var u in r.___after___)r.___after___[u](r,o,r[g],s,i);return s},getPrototypeOf:function(e){return _ in r?r[_]:Reflect.getPrototypeOf(e)},deleteProperty:function(e,t){if(!(t in e))return!0;for(var n in r[p])r[p][n](void 0,t,e,!0,e[t]);if(t in r[d])for(var i in r[d][t])r[d][t][i]&&r[d][t][i](void 0,t,e,!0,e[t]);return delete e[t],!0}})}),r[l]}},{key:"clearBindings",value:function(e){var t;(t=function(e){return Object.keys(e).map(function(t){return delete e[t]})},function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.map(t)})(e[w],e[d],e[p],e.___after___,e.___before___)}},{key:"resolve",value:function(e,t){for(var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.split("."),o=i[0];i.length;){if(n&&1===i.length)return[this.makeBindable(e),i.shift(),o];!(!(r=i.shift())in e)&&e[r]&&e[r]instanceof Object||(e[r]={}),e=this.makeBindable(e[r])}return[this.makeBindable(e),r,o]}},{key:"wrapDelayCallback",value:function(e,t){return function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return setTimeout(function(){return e.apply(void 0,n)},t)}}},{key:"wrapThrottleCallback",value:function(e,t){var r=this;return this.throttles.set(e,!1),function(e){return function(){r.throttles.get(e,!0)||(e.apply(void 0,arguments),r.throttles.set(e,!0),setTimeout(function(){r.throttles.set(e,!1)},t))}}(e)}},{key:"wrapWaitCallback",value:function(e,t){var r=!1;return function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];r&&(clearTimeout(r),r=!1),r=setTimeout(function(){return e.apply(void 0,i)},t)}}},{key:"wrapFrameCallback",value:function(e,t){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];requestAnimationFrame(function(){return e.apply(void 0,r)})}}},{key:"wrapIdleCallback",value:function(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];(window.requestIdleCallback||requestAnimationFrame)(function(){return e.apply(void 0,r)})}}}],(i=null)&&a(r.prototype,i),s&&a(r,s),t}();t.Bindable=x,s=x,u="throttles",c=new WeakMap,u in s?Object.defineProperty(s,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[u]=c,Object.defineProperty(x,"OnGet",{configurable:!1,enumerable:!1,writable:!1,value:S}),Object.defineProperty(x,"GetProto",{configurable:!1,enumerable:!1,writable:!1,value:_}),Object.defineProperty(x,"OnAllGet",{configurable:!1,enumerable:!1,writable:!1,value:O})}()}),require.register("curvature/base/Cache.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Cache=void 0;var r=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var r,n,i;return r=t,i=[{key:"store",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"standard",i=0;r&&(i=1e3*r+(new Date).getTime()),this.bucket||(this.bucket={}),this.bucket[n]||(this.bucket[n]={}),this.bucket[n][e]={expiration:i,value:t}}},{key:"load",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"standard";return this.bucket&&this.bucket[r]&&this.bucket[r][e]&&(0==this.bucket[r][e].expiration||this.bucket[r][e].expiration>(new Date).getTime())?this.bucket[r][e].value:t}}],(n=null)&&e(r.prototype,n),i&&e(r,i),t}();t.Cache=r}()}),require.register("curvature/base/Config.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Config=void 0;var n={};try{n=r("/Config").Config||{}}catch(e){!0===window.devMode&&console.error(e)}var i=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var r,n,i;return r=t,i=[{key:"get",value:function(e){return this.configs[e]}},{key:"set",value:function(e,t){return this.configs[e]=t,this}},{key:"dump",value:function(){return this.configs}},{key:"init",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n in t){var i=t[n];for(var o in"string"==typeof i&&(i=JSON.parse(i)),i){var a=i[o];return this.configs[o]=a}}return this}}],(n=null)&&e(r.prototype,n),i&&e(r,i),t}();t.Config=i,Object.defineProperty(i,"configs",{configurable:!1,enumerable:!1,writable:!1,value:n})}()}),require.register("curvature/base/Dom.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Dom=void 0;var r=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var r,n,i;return r=t,i=[{key:"mapTags",value:function(e,t,r,n,i){var o=[],a=!0;n&&(a=!1);var s=!1,u=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,{acceptNode:function(e,r){if(!a){if(e!==n)return NodeFilter.FILTER_SKIP;a=!0}return i&&e===i&&(s=!0),s?NodeFilter.FILTER_SKIP:t?e instanceof Element&&e.matches(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}},!1);for(0;u.nextNode();)o.push(r(u.currentNode,u));return o}},{key:"dispatchEvent",value:function(e,r){e.dispatchEvent(r),t.mapTags(e,!1,function(e){e.dispatchEvent(r)})}}],(n=null)&&e(r.prototype,n),i&&e(r,i),t}();t.Dom=r}()}),require.register("curvature/base/Mixin.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Mixin=void 0;var e=r("./Bindable");function n(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=a(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw o}}}}function a(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var p=Symbol("constructor"),y=(Symbol("mixinList"),function(){function t(){d(this,t)}var r,a,s;return r=t,s=[{key:"from",value:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return function(r){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(s,e);var a=c(s);function s(){var e;d(this,s);for(var r=arguments.length,u=new Array(r),c=0;c<r;c++)u[c]=arguments[c];var h,v=e=a.call.apply(a,[this].concat(u)),p=o(n);try{for(p.s();!(h=p.n()).done;){var y=h.value;switch(y[t.Constructor]&&y[t.Constructor].apply(f(e)),i(y)){case"object":t.mixObject(y,f(e))}}}catch(e){p.e(e)}finally{p.f()}return l(e,v)}return s}()}},{key:"to",value:function(e){for(var t={},r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];n.map(function(r){switch(i(r)){case"object":Object.assign(t,Object.getOwnPropertyDescriptors(r));break;case"function":Object.assign(t,Object.getOwnPropertyDescriptors(r.prototype))}delete t.constructor,Object.defineProperties(e.prototype,t)})}},{key:"with",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.from.apply(this,[Object].concat(t))}},{key:"mixObject",value:function(e,t){var r,n=o(Object.getOwnPropertyNames(e));try{for(n.s();!(r=n.n()).done;){var i=r.value;"function"!=typeof e[i]?t[i]=e[i]:t[i]=e[i].bind(t)}}catch(e){n.e(e)}finally{n.f()}var a,s=o(Object.getOwnPropertySymbols(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;"function"!=typeof e[u]?t[u]=e[u]:t[u]=e[u].bind(t)}}catch(e){s.e(e)}finally{s.f()}}},{key:"mixClass",value:function(e,t){var r,n=o(Object.getOwnPropertyNames(e.prototype));try{for(n.s();!(r=n.n()).done;){var i=r.value;t.prototype[i]=e.prototype[i].bind(t.prototype)}}catch(e){n.e(e)}finally{n.f()}var a,s=o(Object.getOwnPropertySymbols(e.prototype));try{for(s.s();!(a=s.n()).done;){var u=a.value;t.prototype[u]=e.prototype[u].bind(t.prototype)}}catch(e){s.e(e)}finally{s.f()}var c,l=o(Object.getOwnPropertyNames(e));try{var f=function(){var r=c.value;if("function"!=typeof e[r])return"continue";var n=t[r]||!1,i=e[r].bind(t);t[r]=function(){return n&&n.apply(void 0,arguments),i.apply(void 0,arguments)}};for(l.s();!(c=l.n()).done;)f()}catch(e){l.e(e)}finally{l.f()}var h,d=o(Object.getOwnPropertySymbols(e));try{var v=function(){var r=h.value;if("function"!=typeof e[r])return"continue";var n=t[r]||!1,i=e[r].bind(t);t[r]=function(){return n&&n.apply(void 0,arguments),i.apply(void 0,arguments)}};for(d.s();!(h=d.n()).done;)v()}catch(e){d.e(e)}finally{d.f()}}},{key:"mix",value:function(t){for(var r={},i={},a=e.Bindable.makeBindable(t),s=function(e){var t,s=Object.getOwnPropertyNames(e.prototype),u=/^(before|after)__(.+)/,c=o(Object.getOwnPropertyNames(e));try{var l=function(){var i=t.value,o=i.match(u);if(o){switch(o[1]){case"before":a.___before(function(t,r,a,s,u){if(r===o[2])return e[i].bind(s).apply(void 0,n(u))});break;case"after":a.___after(function(t,r,a,s,u){if(r===o[2])return e[i].bind(s).apply(void 0,n(u))})}return"continue"}return r[i]?"continue":"function"!=typeof e[i]?"continue":void(r[i]=e[i])};for(c.s();!(t=c.n()).done;)l()}catch(e){c.e(e)}finally{c.f()}var f,h=o(s);try{var d=function(){var t=f.value,r=t.match(u);if(r){switch(r[1]){case"before":a.___before(function(i,o,a,s,u){if(o===r[2])return e.prototype[t].bind(s).apply(void 0,n(u))});break;case"after":a.___after(function(i,o,a,s,u){if(o===r[2])return e.prototype[t].bind(s).apply(void 0,n(u))})}return"continue"}return i[t]?"continue":"function"!=typeof e.prototype[t]?"continue":void(i[t]=e.prototype[t])};for(h.s();!(f=h.n()).done;)d()}catch(e){h.e(e)}finally{h.f()}},u=this;u&&u.prototype;u=Object.getPrototypeOf(u))s(u);for(var c in r)t[c]=r[c].bind(t);var l=function(e){t.prototype[e]=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return i[e].apply(this,r)}};for(var f in i)l(f);return a}}],(a=null)&&v(r.prototype,a),s&&v(r,s),t}());t.Mixin=y,y.Constructor=p}()}),require.register("curvature/base/Router.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Router=void 0;var e=r("./View"),n=(r("./Cache"),r("./Config")),i=r("./Routes");function o(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u=Symbol("NotFound"),c=Symbol("Internal"),l=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var r,a,c;return r=t,c=[{key:"wait",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DOMContentLoaded";(arguments.length>2&&void 0!==arguments[2]?arguments[2]:document).addEventListener(r,function(){t.listen(e)})}},{key:"listen",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.routes=r,Object.assign(this.query,this.queryOver({}));var n=function(r){for(var n in r.preventDefault(),r.state&&"routedId"in r.state?r.state.routedId<=t.routeCount?(t.history.splice(r.state.routedId),t.routeCount=r.state.routedId):r.state.routedId>t.routeCount&&(t.history.push(r.state.prev),t.routeCount=r.state.routedId):null!==t.prevPath&&t.prevPath!==location.pathname&&t.history.push(t.prevPath),"null"!==location.origin?t.match(location.pathname,e):t.match(t.nextPath,e),t.query)delete t.query[n];Object.assign(t.query,t.queryOver({}))};window.addEventListener("popstate",n),window.addEventListener("cvUrlChanged",n);var i="null"!==location.origin&&location.pathname+location.search;location.origin&&location.hash&&(i+=location.hash),this.go(!1!==i?i:"/")}},{key:"go",value:function(e,t){var r=n.Config.get("title");for(var i in r&&(document.title=r),"null"===location.origin?this.nextPath=e:2===t&&location.pathname!==e?history.replaceState({routedId:this.routeCount,prev:this.prevPath,url:location.pathname},null,e):location.pathname!==e&&history.pushState({routedId:++this.routeCount,prev:this.prevPath,url:location.pathname},null,e),t||(!1===t&&(this.path=null),"#"===e.substring(0,1)?window.dispatchEvent(new HashChangeEvent("hashchange")):window.dispatchEvent(new CustomEvent("cvUrlChanged"))),this.query)delete this.query[i];Object.assign(this.query,this.queryOver({})),this.prevPath=e}},{key:"match",value:function(t,r){var n=this,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.path!==t||o){this.queryString=location.search,this.path=t;var a=this.prevPath,s=r.args.content,c=this.routes||r.routes||i.Routes.dump();new URLSearchParams(location.search);for(var l in this.query)delete this.query[l];Object.assign(this.query,this.queryOver({}));var f={},h=!1,d="";for(var v in t=t.substr(1).split("/"),this.query)f[v]=this.query[v];e:for(var p in c){var y=p.split("/");if(!(y.length<t.length&&"*"!==y[y.length-1])){for(var m in y)if("%"==y[m].substr(0,1)){var b=null,g=/^%(\w+)\??/.exec(y[m]);if(g&&g[1]&&(b=g[1]),!b)throw new Error("".concat(y[m],' is not a valid argument segment in route "').concat(p,'"'));if(t[m])f[b]=t[m];else{if("?"!=y[m].substr(y[m].length-1,1))continue e;f[b]=""}}else if("*"!==y[m]&&t[m]!==y[m])continue e;h=p,d=c[p],"*"===y[y.length-1]&&(f.pathparts=t.slice(y.length-1));break}}var w=new CustomEvent("cvRouteStart",{cancelable:!0,detail:{path:t,prev:a,root:r,selected:h,routes:c}});if(document.dispatchEvent(w)){if(!o&&r&&s&&d instanceof Object&&s instanceof d&&!(d instanceof Promise)&&s.update(f))return r.args.content=s,!0;try{h in c||(c[h]=c[u]);var k=function(t){return"function"==typeof c[t]?c[t].prototype instanceof e.View?new c[t](f):c[t](f):c[t]};return!1===(d=k(h))&&(d=k(u)),d instanceof Promise?d.then(function(e){n.update(r,t,e,c,h,f,o)}).catch(function(e){throw document.dispatchEvent(new CustomEvent("cvRouteError",{detail:{error:e,path:t,prev:a,view:r,routes:c,selected:h}})),n.update(r,t,window.devMode?String(e):"Error: 500",c,h,f,o),e}):this.update(r,t,d,c,h,f,o)}catch(e){throw document.dispatchEvent(new CustomEvent("cvRouteError",{detail:{error:e,path:t,prev:a,view:r,routes:c,selected:h}})),this.update(r,t,window.devMode?String(e):"Error: 500",c,h,f,o),e}}}}},{key:"update",value:function(t,r,n,i,o,a,s){if(t){var u=this.prevPath,c=new CustomEvent("cvRoute",{cancelable:!0,detail:{result:n,path:r,prev:u,view:t,routes:i,selected:o}});!1!==n&&(t.args.content instanceof e.View&&(t.args.content.pause(!0),t.args.content.remove()),document.dispatchEvent(c)&&(t.args.content=n),n instanceof e.View&&(n.pause(!1),n.update(a,s)));var l=new CustomEvent("cvRouteEnd",{cancelable:!0,detail:{result:n,path:r,prev:u,view:t,routes:i,selected:o}});document.dispatchEvent(l)}}},{key:"queryOver",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={},n={},i=o(new URLSearchParams(location.search));try{for(i.s();!(e=i.n()).done;){var a=e.value;n[a[0]]=a[1]}}catch(e){i.e(e)}finally{i.f()}return delete(r=Object.assign(r,n,t)).api,r}},{key:"queryToString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[],n=e;for(var i in t||(n=this.queryOver(e)),n)""!==n[i]&&r.push(i+"="+encodeURIComponent(n[i]));return r.join("&")}},{key:"setQuery",value:function(e,t,r){var n=this.queryOver();n[e]=t,void 0===t&&delete n[e];var i=this.queryToString(n,!0);this.go(location.pathname+(i?"?"+i:""),r)}}],(a=null)&&s(r.prototype,a),c&&s(r,c),t}();t.Router=l,Object.defineProperty(l,"query",{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(l,"history",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(l,"routeCount",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(l,"prevPath",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(l,"queryString",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(l,"InternalError",{configurable:!1,enumerable:!1,writable:!1,value:c}),Object.defineProperty(l,"NotFoundError",{configurable:!1,enumerable:!1,writable:!1,value:u})}()}),require.register("curvature/base/Routes.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Routes=void 0;var n={};try{Object.assign(n,r("Routes").Routes||{})}catch(e){!0===window.devMode&&console.warn(e)}var i=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var r,n,i;return r=t,i=[{key:"get",value:function(e){return this.routes[e]}},{key:"dump",value:function(){return this.routes}}],(n=null)&&e(r.prototype,n),i&&e(r,i),t}();t.Routes=i,Object.defineProperty(i,"routes",{configurable:!1,enumerable:!1,writable:!1,value:n})}()}),require.register("curvature/base/RuleSet.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RuleSet=void 0;r("./Dom");var e=r("./Tag"),n=r("./View");function i(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var r,o,s;return r=t,s=[{key:"add",value:function(e,t){return this.globalRules=this.globalRules||{},this.globalRules[e]=this.globalRules[e]||[],this.globalRules[e].push(t),this}},{key:"apply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var r in this.globalRules)for(var n in this.globalRules[r]){var o,a=this.globalRules[r][n],s=this.wrap(e,a,t),u=i(e.querySelectorAll(r));try{for(u.s();!(o=u.n()).done;){s(o.value)}}catch(e){u.e(e)}finally{u.f()}}}},{key:"wait",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DOMContentLoaded",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n=function(t,r){return function(){return r.removeEventListener(t,n),e.apply()}}(t,r);r.addEventListener(t,n)}},{key:"wrap",value:function(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(r instanceof n.View||r&&r.prototype&&r.prototype instanceof n.View)&&(r=function(e){return function(){return e}}(r)),function(t){for(var o in void 0===t.___cvApplied___&&Object.defineProperty(t,"___cvApplied___",{enumerable:!1,writable:!1,value:[]}),t.___cvApplied___)if(r==t.___cvApplied___[o])return;var a,s;i&&(a=s=i,i.viewList&&(s=i.viewList.parent)),s&&s.onRemove(function(){return t.___cvApplied___.splice(0)});var u,c=new e.Tag(t,s,null,void 0,a),l=c.element.parentNode,f=c.element.nextSibling,h=r(c);if(!1!==h&&t.___cvApplied___.push(r),h instanceof HTMLElement&&(h=new e.Tag(h)),h instanceof e.Tag){if(!h.element.contains(c.element)){for(;c.element.firstChild;)h.element.appendChild(c.element.firstChild);c.remove()}f?l.insertBefore(h.element,f):l.appendChild(h.element)}h&&h.prototype&&h.prototype instanceof n.View&&(h=new h({},i)),h instanceof n.View&&(i&&(i.cleanup.push((u=h,function(){u.remove()})),i.cleanup.push(i.args.bindTo(function(e,t,r){r[t]=e,h.args[t]=e})),i.cleanup.push(h.args.bindTo(function(e,t,r,n){r[t]=e,i.args[t]=e}))),c.clear(),h.render(c.element))}}}],(o=[{key:"add",value:function(e,t){return this.rules=this.rules||{},this.rules[e]=this.rules[e]||[],this.rules[e].push(t),this}},{key:"apply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var n in t.apply(e,r),this.rules)for(var o in this.rules[n]){var a,s=this.rules[n][o],u=t.wrap(e,s,r),c=i(e.querySelectorAll(n));try{for(c.s();!(a=c.n()).done;){u(a.value)}}catch(e){c.e(e)}finally{c.f()}}}}])&&a(r.prototype,o),s&&a(r,s),t}();t.RuleSet=s}()}),require.register("curvature/base/Tag.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tag=void 0;var e=r("./Bindable");function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function t(r,n,i,o,a){var s,u=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof r){var c=document.createRange().createContextualFragment(r);r=c.firstChild}return this.element=e.Bindable.makeBindable(r),this.node=this.element,this.parent=n,this.direct=a,this.ref=i,this.index=o,this.cleanup=[],this[e.Bindable.OnAllGet]=function(e){return"function"==typeof u[e]?u[e]:u.node&&"function"==typeof u.node[e]?function(){var t;return(t=u.node)[e].apply(t,arguments)}:u.node&&e in u.node?u.node[e]:u[e]},this.style=(s=this,e.Bindable.make(function(e){if(s.node){var t=new CustomEvent("cvStyle",{detail:{styles:e}});if(s.node.dispatchEvent(t))for(var r in e)"-"===r[0]&&s.node.style.setProperty(r,e[r]),s.node.style[r]=e[r]}})),this.proxy=e.Bindable.make(this),this.proxy.style.bindTo(function(e,t){u.element.style[t]=e}),this.proxy.bindTo(function(e,t){return t in r&&(r[t]=e),!1}),this.proxy}var r,i,o;return r=t,(i=[{key:"attr",value:function(e){for(var t in e)void 0===e[t]?this.node.removeAttribute(t):null===e[t]?this.node.setAttribute(t,""):this.node.setAttribute(t,e[t])}},{key:"remove",value:function(){var t;for(this.node&&this.node.remove(),e.Bindable.clearBindings(this);t=this.cleanup.shift();)t();if(this.clear(),this.node){var r=new Event("cvDomDetached");this.node.dispatchEvent(r),this.node=this.element=this.ref=this.parent=void 0}}},{key:"clear",value:function(){if(this.node)for(var e=new Event("cvDomDetached");this.node.firstChild;)this.node.firstChild.dispatchEvent(e),this.node.removeChild(this.node.firstChild)}},{key:"pause",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}},{key:"listen",value:function(e,t,r){var n=this.node;n.addEventListener(e,t,r);var i=function(){n.removeEventListener(e,t,r)},o=function(){i(),i=function(){return console.warn("Already removed!")}};return this.parent.onRemove(function(){return o()}),o}}])&&n(r.prototype,i),o&&n(r,o),t}();t.Tag=i}()}),require.register("curvature/base/View.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;var e=r("./Bindable"),n=r("./ViewList"),i=r("./Router"),o=r("./Dom"),a=r("./Tag"),s=r("./Bag"),u=r("./RuleSet"),c=r("./Mixin"),l=(r("../mixin/PromiseMixin"),r("../mixin/EventTargetMixin"));function f(e){"@babel/helpers - typeof";return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=p(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function p(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t,r){return t&&m(e.prototype,t),r&&m(e,r),e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=S(e);if(t){var i=S(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return k(this,r)}}function k(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=Symbol("dontParse"),j=Symbol("expandBind"),P=Symbol("uuid"),T=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(p,c.Mixin["with"](l.EventTargetMixin));var f=w(p);function p(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),t=f.call(this,r,n),Object.defineProperty(_(t),"args",{value:e.Bindable.make(r)}),Object.defineProperty(_(t),P,{value:t.uuid()}),Object.defineProperty(_(t),"attach",{value:new s.Bag(function(e,t,r){})}),Object.defineProperty(_(t),"detach",{value:new s.Bag(function(e,t,r){})}),Object.defineProperty(_(t),"_onRemove",{value:new s.Bag(function(e,t,r){})}),Object.defineProperty(_(t),"cleanup",{value:[]}),Object.defineProperty(_(t),"parent",{value:n}),Object.defineProperty(_(t),"views",{value:new Map}),Object.defineProperty(_(t),"viewLists",{value:new Map}),Object.defineProperty(_(t),"withViews",{value:new Map}),Object.defineProperty(_(t),"tags",{value:e.Bindable.make({})}),Object.defineProperty(_(t),"nodes",{value:e.Bindable.make([])}),Object.defineProperty(_(t),"intervals",{value:[]}),Object.defineProperty(_(t),"timeouts",{value:[]}),Object.defineProperty(_(t),"frames",{value:[]}),Object.defineProperty(_(t),"ruleSet",{value:new u.RuleSet}),Object.defineProperty(_(t),"preRuleSet",{value:new u.RuleSet}),Object.defineProperty(_(t),"subBindings",{value:{}}),Object.defineProperty(_(t),"templates",{value:{}}),Object.defineProperty(_(t),"eventCleanup",{value:[]}),Object.defineProperty(_(t),"interpolateRegex",{value:/(\[\[((?:\$+)?[\w\.\|-]+)\]\])/g}),Object.defineProperty(_(t),"rendered",{value:new Promise(function(e,r){return Object.defineProperty(_(t),"renderComplete",{value:e})})}),t.template="",t.firstNode=null,t.lastNode=null,t.viewList=null,t.mainView=null,t.preserve=!1,t.removed=!1,k(t,e.Bindable.make(_(t)))}return b(p,[{key:"_id",get:function(){return this[P]}}],[{key:"from",value:function(e){var t=new this(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return t.template=e,t}}]),b(p,[{key:"onFrame",value:function(e){var t=this,r=!1,n=function(){r=!0};return requestAnimationFrame(function(){return function n(i){t.removed||r||(t.paused||e(Date.now()),requestAnimationFrame(n))}(Date.now())}),this.frames.push(n),n}},{key:"onNextFrame",value:function(e){return requestAnimationFrame(function(){return e(Date.now())})}},{key:"onIdle",value:function(e){return requestIdleCallback(function(){return e(Date.now())})}},{key:"onTimeout",value:function(e,t){var r=this,n=function(){r.timeouts[o].fired=!0,r.timeouts[o].callback=null,t()},i=setTimeout(n,e),o=this.timeouts.length;return this.timeouts.push({timeout:i,callback:n,time:e,fired:!1,created:(new Date).getTime(),paused:!1}),i}},{key:"clearTimeout",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){for(var t in this.timeouts)e===this.timeouts[t].timeout&&(clearTimeout(this.timeouts[t].timeout),delete this.timeouts[t])})},{key:"onInterval",value:function(e,t){var r=setInterval(t,e);return this.intervals.push({timeout:r,callback:t,time:e,paused:!1}),r}},{key:"clearInterval",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){for(var t in this.intervals)e===this.intervals[t].timeout&&(clearInterval(this.intervals[t].timeout),delete this.intervals[t])})},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(void 0===e&&(this.paused=!this.paused),this.paused=e,this.paused){for(var t in this.timeouts)this.timeouts[t].fired?delete this.timeouts[t]:clearTimeout(this.timeouts[t].timeout);for(var r in this.intervals)clearInterval(this.intervals[r].timeout)}else{for(var n in this.timeouts)this.timeouts[n].timeout.paused&&(this.timeouts[n].fired?delete this.timeouts[n]:this.timeouts[n].timeout=setTimeout(this.timeouts[n].callback,this.timeouts[n].time));for(var i in this.intervals)this.intervals[i].timeout.paused&&(this.intervals[i].timeout.paused=!1,this.intervals[i].timeout=setInterval(this.intervals[i].callback,this.intervals[i].time))}var o,a=v(this.viewLists);try{for(a.s();!(o=a.n()).done;){var s=d(o.value,2);s[0];s[1].pause(!!e)}}catch(e){a.e(e)}finally{a.f()}for(var u in this.tags)if(Array.isArray(this.tags[u]))for(var c in this.tags[u])this.tags[u][c].pause(!!e);else this.tags[u].pause(!!e)}},{key:"render",value:function(){var e,t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(r instanceof p&&(r=r.firstNode.parentNode),n instanceof p&&(n=n.firstNode),this.firstNode)return this.reRender(r,n);this.dispatchEvent(new CustomEvent("render"));var i=this.template instanceof DocumentFragment?this.template.cloneNode(!0):p.templates.has(this.template),o=i?this.template instanceof DocumentFragment?i:p.templates.get(this.template).cloneNode(!0):document.createRange().createContextualFragment(this.template);if(i||this.template instanceof DocumentFragment||p.templates.set(this.template,o.cloneNode(!0)),this.mainView||this.preRuleSet.apply(o,this),this.mapTags(o),this.mainView||this.ruleSet.apply(o,this),!0===window.devMode?(this.firstNode=document.createComment("Template ".concat(this._id," Start")),this.lastNode=document.createComment("Template ".concat(this._id," End"))):(this.firstNode=document.createTextNode(""),this.lastNode=document.createTextNode("")),(e=this.nodes).push.apply(e,[this.firstNode].concat(h(Array.from(o.childNodes)),[this.lastNode])),this.postRender(r),this.dispatchEvent(new CustomEvent("rendered")),this.dispatchAttach()){if(r){var a=r.getRootNode(),s=!1;a.isConnected&&(s=!0,"external"),n?(r.insertBefore(this.firstNode,n),r.insertBefore(this.lastNode,n)):(r.appendChild(this.firstNode),r.appendChild(this.lastNode)),r.insertBefore(o,this.lastNode),0,s?(this.attached(a,r),this.dispatchAttached(a,r)):r.addEventListener("cvDomAttached",function(){t.attached(a,r),t.dispatchAttached(a,r)},{once:!0})}return this.renderComplete(this.nodes),this.nodes}}},{key:"dispatchAttach",value:function(){return this.dispatchEvent(new CustomEvent("attach",{cancelable:!0,target:this}))}},{key:"dispatchAttached",value:function(e,t){this.dispatchEvent(new CustomEvent("attached",{target:this}));var r=this.attach.items();for(var n in r)r[n](e,t);this.nodes.filter(function(e){return e.nodeType!==Node.COMMENT_NODE}).map(function(e){e.matches&&(o.Dom.mapTags(e,!1,function(e,t){e.matches&&e.dispatchEvent(new Event("cvDomAttached",{target:e}))}),e.dispatchEvent(new Event("cvDomAttached",{target:e})))})}},{key:"reRender",value:function(e,t){if(this.dispatchEvent(new CustomEvent("reRender"),{cancelable:!0,target:this})){var r=new DocumentFragment;if(this.firstNode.isConnected){var n=this.detach.items();for(var i in n)n[i]()}if(r.append.apply(r,h(this.nodes)),e){t?(e.insertBefore(this.firstNode,t),e.insertBefore(this.lastNode,t)):(e.appendChild(this.firstNode),e.appendChild(this.lastNode)),e.insertBefore(r,this.lastNode),this.dispatchEvent(new CustomEvent("reRendered"),{cancelable:!0,target:this});var o=e.getRootNode();o.isConnected&&(this.attached(o,e),this.dispatchAttached(o,e))}return this.nodes}}},{key:"mapTags",value:function(e){var t=this;o.Dom.mapTags(e,!1,function(e,r){e[O]||(e=e.matches?(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=t.mapInterpolatableTag(e)).matches("[cv-template]")&&t.mapTemplateTag(e)||e).matches("[cv-slot]")&&t.mapSlotTag(e)||e).matches("[cv-prerender]")&&t.mapPrendererTag(e)||e).matches("[cv-link]")&&t.mapLinkTag(e)||e).matches("[cv-attr]")&&t.mapAttrTag(e)||e).matches("[cv-expand]")&&t.mapExpandableTag(e)||e).matches("[cv-ref]")&&t.mapRefTag(e)||e).matches("[cv-on]")&&t.mapOnTag(e)||e).matches("[cv-each]")&&t.mapEachTag(e)||e).matches("[cv-bind]")&&t.mapBindTag(e)||e).matches("[cv-with]")&&t.mapWithTag(e)||e).matches("[cv-if]")&&t.mapIfTag(e)||e).matches("[cv-view]")&&t.mapViewTag(e)||e:t.mapInterpolatableTag(e))!==r.currentNode&&(r.currentNode=e)})}},{key:"mapExpandableTag",value:function(t){var r=t[j];r&&(r(),t[j]=!1);var n=d(e.Bindable.resolve(this.args,t.getAttribute("cv-expand"),!0),2),i=n[0],o=n[1];return t.removeAttribute("cv-expand"),i[o]||(i[o]={}),this.onRemove(t[j]=i[o].bindTo(function(e,r,n,i,o){i||void 0===e?t.removeAttribute(r,e):null!==e?t.setAttribute(r,e):t.setAttribute(r,"")})),t}},{key:"compileExpandableTag",value:function(t){return function(r){var n=t.cloneNode(!0),i=n.getAttribute("cv-expand"),o=e.Bindable.make(r.args[i]||{});n.removeAttribute("cv-expand");var a=function(t){if("name"===t||"type"===t)return"continue";var i=o.bindTo(t,function(e,t){return function(r){e.setAttribute(t,r)}}(n,t));r.onRemove(function(){i(),o.isBound()&&e.Bindable.clearBindings(o)})};for(var s in o)a(s);return n}}},{key:"mapAttrTag",value:function(e){var t=this.compileAttrTag(e)(this);return e.replaceWith(t),t}},{key:"compileAttrTag",value:function(t){var r=t.getAttribute("cv-attr").split(",").map(function(e){return e.split(":")});return t.removeAttribute("cv-attr"),function(n){var i=t.cloneNode(!0),o=function(t){var o=r[t][1]||r[t][0],a=d(e.Bindable.resolve(n.args,o,!0),2),s=a[0],u=a[1],c=r[t][0];n.onRemove(s.bindTo(u,function(e,t,r,n){n||void 0===e?i.removeAttribute(c,e):null!==e?i.setAttribute(c,e):i.setAttribute(c,"")}))};for(var a in r)o(a);return i}}},{key:"mapInterpolatableTag",value:function(t){var r=this,n=this.interpolateRegex;if(t.nodeType===Node.TEXT_NODE){var i=t.nodeValue;if(!this.interpolatable(i))return t;for(var o,s=0,u=function(){var n=o[2],u=!1,c=!1,l=n.split("|"),f=!1;if(l.length>1&&(f=r.stringTransformer(l.slice(1)),n=l[0]),"$$"===n.substr(0,2)&&(u=!0,c=!0,n=n.substr(2)),"$"===n.substr(0,1)&&(u=!0,n=n.substr(1)),"000"===n.substr(0,3))return expand=!0,n=n.substr(3),"continue";var h=i.substring(s,o.index);s=o.index+o[1].length;var v=document.createTextNode(h);v[O]=!0,t.parentNode.insertBefore(v,t);var y=void 0;(y=u?document.createElement("div"):document.createTextNode(""))[O]=!0;var m=r.args,b=n;if(n.match(/\./)){var g=d(e.Bindable.resolve(r.args,n,!0),2);m=g[0],b=g[1]}t.parentNode.insertBefore(y,t);var w=m.bindTo(b,function(e,n,i){if(i[n]!==e&&(i[n]instanceof p||i[n]instanceof Node||i[n]instanceof a.Tag)&&(i[n].preserve||i[n].remove()),y.nodeValue="",c&&!(e instanceof p)){var o=e;(e=new p(r.args,r)).template=o}if(f&&(e=f(e)),e instanceof p){var s=function(t){e.dispatchAttach()&&(e.attached(t),e.dispatchAttached())};r.attach.add(s),e.render(t.parentNode,y);var l=function(){e.preserve||e.remove()};r.onRemove(l),e.onRemove(function(){r.attach.remove(s),r._onRemove.remove(l)})}else e instanceof Node?(t.parentNode.insertBefore(e,y),r.onRemove(function(){return e.remove()})):e instanceof a.Tag?(t.parentNode.insertBefore(e.node,y),r.onRemove(function(){return e.remove()})):(e instanceof Object&&e.__toString instanceof Function&&(e=e.__toString()),u?y.innerHTML=e:y.nodeValue=e);y[O]=!0});r.onRemove(w)};o=n.exec(i);)u();var c=i.substring(s),l=document.createTextNode(c);l[O]=!0,t.parentNode.insertBefore(l,t),t.nodeValue=""}if(t.nodeType===Node.ELEMENT_NODE)for(var f=function(i){if(!r.interpolatable(t.attributes[i].value))return"continue";for(var o=0,a=void 0,s=t.attributes[i].value,u=t.attributes[i],c={},l=[];a=n.exec(s);)l.push(s.substring(o,a.index)),c[a[2]]||(c[a[2]]=[]),c[a[2]].push(l.length),l.push(a[1]),o=a.index+a[1].length;l.push(s.substring(o));var f=function(n){var i=r.args,o=n,a=n.split("|"),s=!1,f=n;if(a.length>1&&(s=r.stringTransformer(a.slice(1)),o=a[0]),o.match(/\./)){var h=d(e.Bindable.resolve(r.args,o,!0),2);i=h[0],o=h[1]}c[f];r.onRemove(i.bindTo(o,function(e,r,n,i){for(var a in s&&(e=s(e)),c)for(var h in c[f])l[c[f][h]]=n[a],r===o&&(l[c[f][h]]=e);t.setAttribute(u.name,l.join(""))})),r.onRemove(function(){i.isBound()||e.Bindable.clearBindings(i)})};for(var h in c)f(h)},h=0;h<t.attributes.length;h++)f(h);return t}},{key:"mapRefTag",value:function(e){var t=d(e.getAttribute("cv-ref").split(":"),3),r=t[0],n=t[1],i=void 0===n?null:n,o=t[2],s=void 0===o?null:o,u=a.Tag;i&&(u=this.stringToClass(i)),e.removeAttribute("cv-ref"),Object.defineProperty(e,"___tag___",{enumerable:!1,writable:!0}),this.onRemove(function(){e.___tag___=null,e.remove()});var c=this;this.viewList&&(c=this.viewList.parent);var l=new u(e,this,r,void 0,this);for(e.___tag___=l,this.tags[r]=l;c;){c.parent;var f=this.args[s];void 0!==f?(c.tags[r]||(c.tags[r]=[]),c.tags[r][f]=l):c.tags[r]=l,c=c.parent}return e}},{key:"mapBindTag",value:function(t){var r=this,n=t.getAttribute("cv-bind"),i=this.args,s=n,u=null;if(n.match(/\./)){var c=d(e.Bindable.resolve(this.args,n,!0),3);i=c[0],s=c[1],u=c[2]}i!==this.args&&(this.subBindings[n]=this.subBindings[n]||[],this.onRemove(this.args.bindTo(u,function(){for(;r.subBindings.length;)r.subBindings.shift()()})));var l=!1;"$"===s.substr(0,1)&&(s=s.substr(1),l=!0);var f=i.bindTo(s,function(e,n,i,s,u){(u instanceof p||u instanceof Node||u instanceof a.Tag)&&u!==e&&u.remove();var c=new CustomEvent("cvAutoChanged",{bubbles:!0});if(["INPUT","SELECT","TEXTAREA"].includes(t.tagName)){var f=t.getAttribute("type");if(f&&"checkbox"===f.toLowerCase())t.checked=!!e,t.dispatchEvent(c);else if(f&&"radio"===f.toLowerCase())t.checked=e==t.value,t.dispatchEvent(c);else if("file"!==f){if("SELECT"===t.tagName){var h=function(){for(var r=0;r<t.options.length;r++){t.options[r].value==e&&(t.selectedIndex=r)}};h(),r.attach.add(h)}else t.value=null==e?"":e;t.dispatchEvent(c)}}else if(e instanceof p){var d,y=v(t.childNodes);try{for(y.s();!(d=y.n()).done;){d.value.remove()}}catch(e){y.e(e)}finally{y.f()}var m=function(t){e.dispatchAttach()&&(e.attached(t),e.dispatchAttached())};r.attach.add(m),e.render(t),e.onRemove(function(){return r.attach.remove(m)})}else if(e instanceof Node)t.insert(e);else if(e instanceof a.Tag)t.append(e.node);else if(l){if(t.innerHTML!==e){if(e=String(e),t.innerHTML===e.substring(0,t.innerHTML.length))t.innerHTML+=e.substring(t.innerHTML.length);else{var b,g=v(t.childNodes);try{for(g.s();!(b=g.n()).done;){b.value.remove()}}catch(e){g.e(e)}finally{g.f()}t.innerHTML=e}o.Dom.mapTags(t,!1,function(e){return e[O]=!0})}}else if(t.textContent!==e){var w,k=v(t.childNodes);try{for(k.s();!(w=k.n()).done;){w.value.remove()}}catch(e){k.e(e)}finally{k.f()}t.textContent=e}});i!==this.args&&this.subBindings[n].push(f),this.onRemove(f);var h=t.getAttribute("type"),y=t.getAttribute("multiple"),m=function(r){if(r.target===t)if(h&&"checkbox"===h.toLowerCase())t.checked?i[s]=r.target.getAttribute("value"):i[s]=!1;else if(r.target.matches("[contenteditable=true]"))i[s]=r.target.innerHTML;else if("file"===h&&y){var n=Array.from(r.target.files),o=i[s]||e.Bindable.onDeck(i,s);if(o&&n.length){var a=function(e){if(n[e]!==o[e])return n[e].toJSON=function(){return{name:file[e].name,size:file[e].size,type:file[e].type,date:file[e].lastModified}},o[e]=n[e],"break"};for(var u in n){if("break"===a(u))break}}else i[s]=n}else if("file"!==h||y)i[s]=r.target.value;else{var c=r.target.files.item(0);c.toJSON=function(){return{name:c.name,size:c.size,type:c.type,date:c.lastModified}},i[s]=c}};return"file"===h||"radio"===h?t.addEventListener("change",m):(t.addEventListener("input",m),t.addEventListener("change",m),t.addEventListener("value-changed",m)),this.onRemove(function(){"file"===h||"radio"===h?t.removeEventListener("change",m):(t.removeEventListener("input",m),t.removeEventListener("change",m),t.removeEventListener("value-changed",m))}),t.removeAttribute("cv-bind"),t}},{key:"mapOnTag",value:function(e){var t=this;return String(e.getAttribute("cv-on")).split(";").map(function(e){return e.split(":")}).map(function(r){var n,i=(r=r.map(function(e){return e.trim()})).length,o=String(r.shift()).trim(),a=String(r.shift()||o).trim(),s=String(r.shift()||"").trim(),u=[],c=/(\w+)(?:\(([$\w\s-'",]+)\))?/.exec(a);c?(a=c[1].replace(/(^[\s\n]+|[\s\n]+$)/,""),c[2]&&(u=c[2].split(",").map(function(e){return e.trim()})),c.length):u.push("$event"),o&&1!==i||(o=a);for(var l=t;l;){if("function"==typeof l[a])if("break"===function(){var e=l,t=a;return n=function(){e[t].apply(e,arguments)},"break"}())break;if(!l.parent)break;l=l.parent}var f=function(r){var i=u.map(function(n){var i;return parseInt(n)==n?n:"event"===n||"$event"===n?r:"$view"===n?l:"$tag"===n?e:"$parent"===n?t.parent:"$subview"===n?t:n in t.args?t.args[n]:(i=/^['"]([\w-]+?)["']$/.exec(n))?i[1]:void 0});if("function"!=typeof n)throw new Error("".concat(a," is not defined on View object.")+"\nTag:\n"+"".concat(e.outerHTML));n.apply(void 0,h(i))},d={};switch(s.includes("p")?d.passive=!0:s.includes("P")&&(d.passive=!1),s.includes("c")?d.capture=!0:s.includes("C")&&(d.capture=!1),s.includes("o")?d.once=!0:s.includes("O")&&(d.once=!1),o){case"_init":f();break;case"_attach":t.attach.add(f);break;case"_detach":t.detach.add(f);break;default:e.addEventListener(o,f,d),t.onRemove(function(){e.removeEventListener(o,f,d)})}return[o,a,u]}),e.removeAttribute("cv-on"),e}},{key:"mapLinkTag",value:function(e){var t=e.getAttribute("cv-link");e.setAttribute("href",t);var r=function(r){r.preventDefault(),"http"!==t.substring(0,4)&&"//"!==t.substring(0,2)?i.Router.go(e.getAttribute("href")):window.open(e.getAttribute("href",t))};return e.addEventListener("click",r),this.onRemove(function(e,t){return function(){e.removeEventListener("click",t),e=void 0,t=void 0}}(e,r)),e.removeAttribute("cv-link"),e}},{key:"compileLinkTag",value:function(e){var t=e.getAttribute("cv-link");return e.removeAttribute("cv-link"),function(r){var n=e.cloneNode(!0);return n.setAttribute("href",t),n}}},{key:"mapPrendererTag",value:function(e){var t=e.getAttribute("cv-prerender"),r=window.prerenderer||navigator.userAgent.match(/prerender/i);return r&&(window.prerenderer=window.prerenderer||!0),("never"===t&&r||"only"===t&&!r)&&e.parentNode.removeChild(e),e}},{key:"mapWithTag",value:function(t){var r=this,n=t.getAttribute("cv-with"),i=t.getAttribute("cv-carry"),o=t.getAttribute("cv-view");t.removeAttribute("cv-with"),t.removeAttribute("cv-carry"),t.removeAttribute("cv-view");var a=o?this.stringToClass(o):p,s=new DocumentFragment;h(t.childNodes).map(function(e){return s.appendChild(e)});var u=[];i&&(u=i.split(",").map(function(e){return e.trim()}));var c=this.args.bindTo(n,function(n,i,o,c){for(r.withViews.has(t)&&r.withViews.delete(t);t.firstChild;)t.removeChild(t.firstChild);var l=new a({},r);r.onRemove(function(e){return function(){e.remove()}}(l)),l.template=s;var f=function(e){var t=r.args.bindTo(u[e],function(e,t){l.args[t]=e});l.onRemove(t),r.onRemove(function(){t(),l.remove()})};for(var h in u)f(h);var d=function(t){var i=n.bindTo(t,function(e,t){l.args[t]=e});l.args.bindTo(t,function(e,t){n[t]=e});r.onRemove(function(){i(),n.isBound()||e.Bindable.clearBindings(n),l.remove()}),l.onRemove(function(){i(),n.isBound()||e.Bindable.clearBindings(n)})};for(var v in n)d(v);l.render(t),r.withViews.set(t,l)});return this.onRemove(function(){r.withViews.delete(t),c()}),t}},{key:"mapViewTag",value:function(e){var t=this,r=e.getAttribute("cv-view");e.removeAttribute("cv-view");var n=new DocumentFragment;h(e.childNodes).map(function(e){return n.appendChild(e)});var i=r.split(":"),o=i.pop()?this.stringToClass(r):p,a=i.shift(),s=new o(this.args,this);return this.views.set(e,s),a&&this.views.set(a,s),this.onRemove(function(r){return function(){r.remove(),t.views.delete(e),t.views.delete(a)}}(s)),s.template=n,s.render(e),e}},{key:"mapEachTag",value:function(e){var t=this,r=e.getAttribute("cv-each"),i=e.getAttribute("cv-view");e.removeAttribute("cv-each"),e.removeAttribute("cv-view");var o=i?this.stringToClass(i):p,a=new DocumentFragment;Array.from(e.childNodes).map(function(e){return a.appendChild(e)});var s=d(r.split(":"),3),u=s[0],c=s[1],l=s[2],f=this.args.bindTo(u,function(r,i,s,u,f){t.viewLists.has(e)&&t.viewLists.get(e).remove();var h=new n.ViewList(a,c,r,t,l,o),d=function(){return h.remove()};t.onRemove(d),h.onRemove(function(){return t._onRemove.remove(d)});var v=t.args.bindTo(function(e,t,r,n){"_id"!==t&&(n&&delete h.subArgs[t],h.subArgs[t]=e)}),p=h.args.bindTo(function(e,r,n,i,o){"_id"!==r&&"value"!==r&&"___"!==r.substring(0,3)&&(i&&delete t.args[r],r in t.args&&(t.args[r]=e))});for(h.onRemove(v),h.onRemove(p),t.onRemove(v),t.onRemove(p);e.firstChild;)e.removeChild(e.firstChild);t.viewLists.set(e,h),h.render(e)});return this.onRemove(f),e}},{key:"mapIfTag",value:function(t){var r=this,n=t,i=t.getAttribute("cv-view"),o=n.getAttribute("cv-if"),a=!1,s=!1;n.removeAttribute("cv-view"),n.removeAttribute("cv-if");var u=i?this.stringToClass(i):p;"!"===o.substr(0,1)&&(o=o.substr(1),a=!0),"?"===o.substr(0,1)&&(o=o.substr(1),s=!0);var c=new DocumentFragment;Array.from(n.childNodes).map(function(e){return c.appendChild(e)});var l=this,f=new DocumentFragment,h=new u(this.args,l);this.onRemove(h.tags.bindTo(function(e,t){r.tags[t]=e})),h.template=c;var v=l.args,y=o;if(o.match(/\./)){var m=d(e.Bindable.resolve(l.args,o,!0),2);v=m[0],y=m[1]}h.render(f);var b=v.bindTo(y,function(e,r){s&&(e=null!==e&&void 0!==e),Array.isArray(e)&&(e=!!e.length),a&&(e=!e),e?t.appendChild(f):h.nodes.map(function(e){return f.appendChild(e)})},{wait:0,children:Array.isArray(v[y])});l.onRemove(b);var g=function(){v.isBound()||e.Bindable.clearBindings(v)};return l.onRemove(function(){b(),g(),l._onRemove.remove(b),l._onRemove.remove(g)}),this.onRemove(function(){h.remove(),l!==r&&l.remove()}),t}},{key:"compileIfTag",value:function(t){var r=t.getAttribute("cv-if"),n=!1;t.removeAttribute("cv-if"),"!"===r.substr(0,1)&&(r=r.substr(1),n=!0);var i=new DocumentFragment;return Array.from(t.childNodes).map(function(e){return i.appendChild(e.cloneNode(!0))}),function(o){var a=t.cloneNode(),s=new DocumentFragment,u=new p({},o);u.template=i,o.syncBind(u);var c=o.args,l=r;if(r.match(/\./)){var f=d(e.Bindable.resolve(o.args,r,!0),2);c=f[0],l=f[1]}var h=!1,v=c.bindTo(l,function(e,t){if(!h){var r=o.args[l]||n?a:s;return u.render(r),void(h=!0)}Array.isArray(e)&&(e=!!e.length),n&&(e=!e),e?a.appendChild(s):u.nodes.map(function(e){return s.appendChild(e)})});o.onRemove(v);var y=function(){c.isBound()||e.Bindable.clearBindings(c)};return u.onRemove(function(){v(),y(),o._onRemove.remove(v),o._onRemove.remove(y)}),a}}},{key:"mapTemplateTag",value:function(e){var t=e.getAttribute("cv-template");return e.removeAttribute("cv-template"),this.templates[t]=function(){return"TEMPLATE"===e.tagName?e.content.cloneNode(!0):new DocumentFragment(e.innerHTML)},this.rendered.then(function(){return e.remove()}),e}},{key:"mapSlotTag",value:function(e){var t=e.getAttribute("cv-slot"),r=this.templates[t];if(!r){for(var n=this;n&&!(r=n.templates[t]);)n=this.parent;if(!r)return void console.error("Template ".concat(t," not found."))}var i=r();for(e.removeAttribute("cv-slot");e.firstChild;)e.firstChild.remove();return e.appendChild(i),e}},{key:"syncBind",value:function(e){var t=this,r=this.args.bindTo(function(t,r,n,i){"_id"!==r&&e.args[r]!==t&&(e.args[r]=t)}),n=e.args.bindTo(function(e,r,n,i,o){if("_id"!==r){var a=e,s=o;a instanceof p&&(a=a.___ref___),s instanceof p&&(s=s.___ref___),a!==s&&s instanceof p&&o.remove(),r in t.args&&(t.args[r]=e)}});this.onRemove(r),this.onRemove(n),e.onRemove(function(){t._onRemove.remove(r),t._onRemove.remove(n)})}},{key:"postRender",value:function(e){}},{key:"attached",value:function(e){}},{key:"interpolatable",value:function(e){return!!String(e).match(this.interpolateRegex)}},{key:"uuid",value:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})}},{key:"remove",value:function(){var e=this,t=function(){for(var t in e.tags)Array.isArray(e.tags[t])?(e.tags[t]&&e.tags[t].map(function(e){return e.remove()}),e.tags[t].splice(0)):(e.tags[t]&&e.tags[t].remove(),e.tags[t]=void 0);for(var r in e.nodes)e.nodes[r]&&e.nodes[r].dispatchEvent(new Event("cvDomDetached")),e.nodes[r]&&e.nodes[r].remove(),e.nodes[r]=void 0;e.nodes.splice(0),e.firstNode=e.lastNode=void 0};arguments.length>0&&void 0!==arguments[0]&&arguments[0]?t():requestAnimationFrame(t);var r,n,i=v(this._onRemove.items());try{for(i.s();!(r=i.n()).done;){var o=r.value;this._onRemove.remove(o),o()}}catch(e){i.e(e)}finally{i.f()}for(;n=this.cleanup.shift();)n&&n();var a,s=v(this.viewLists);try{for(s.s();!(a=s.n()).done;){var u=d(a.value,2);u[0];u[1].remove()}}catch(e){s.e(e)}finally{s.f()}for(var c in this.viewLists.clear(),this.timeouts)clearTimeout(this.timeouts[c].timeout),delete this.timeouts[c];for(var l in this.intervals)clearInterval(this.intervals[l].timeout),delete this.intervals[l];for(var l in this.frames)this.frames[l](),delete this.frames[l];this.removed=!0}},{key:"findTag",value:function(e){for(var t in this.nodes){var r;if(this.nodes[t].querySelector){if(this.nodes[t].matches(e))return new a.Tag(this.nodes[t],this,void 0,void 0,this);if(r=this.nodes[t].querySelector(e))return new a.Tag(r,this,void 0,void 0,this)}}}},{key:"findTags",value:function(e){var t=this;return this.nodes.filter(function(e){return e.querySelectorAll}).map(function(t){return h(t.querySelectorAll(e))}).flat().map(function(e){return new a.Tag(e,t,void 0,void 0,t)})}},{key:"onRemove",value:function(e){this._onRemove.add(e)}},{key:"update",value:function(){}},{key:"beforeUpdate",value:function(e){}},{key:"afterUpdate",value:function(e){}},{key:"stringTransformer",value:function(e){var t=this;return function(r){for(var n in e){for(var i=t,o=e[n];i&&!i[o];)i=i.parent;if(!i)return;r=i[e[n]](r)}return r}}},{key:"stringToClass",value:function(e){if(p.refClasses.has(e))return p.refClasses.get(e);var t=e.split("/"),n=t[t.length-1],i=r(e);return p.refClasses.set(e,i[n]),i[n]}},{key:"preventParsing",value:function(e){e[O]=!0}},{key:"toString",value:function(){return this.nodes.map(function(e){return e.outerHTML}).join(" ")}},{key:"listen",value:function(e,t,r,n){var i=this;if("string"==typeof e&&(n=r,r=t,t=e,e=this),e instanceof p)return this.listen(e.nodes,t,r,n);if(Array.isArray(e)){var o=e.map(function(e){return i.listen(e,t,r,n)});return function(){return o.map(function(e){return e()})}}if(e instanceof a.Tag)return this.listen(e.element,t,r,n);e.addEventListener(t,r,n);var s=function(){e.removeEventListener(t,r,n)},u=function(){s(),s=function(){}};return this.onRemove(function(){return u()}),u}}],[{key:"isView",value:function(){return p}}]),p}();t.View=T,Object.defineProperty(T,"templates",{value:new Map}),Object.defineProperty(T,"refClasses",{value:new Map})}()}),require.register("curvature/base/ViewList.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewList=void 0;var e=r("./Bindable"),n=r("./View"),i=r("./Bag");function o(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=function(){function t(r,o,a,u){var c=this,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.removed=!1,this.args=e.Bindable.makeBindable({}),this.args.value=e.Bindable.makeBindable(a||{}),this.subArgs=e.Bindable.makeBindable({}),this.views=[],this.cleanup=[],this.viewClass=f||n.View,this._onRemove=new i.Bag,this.template=r,this.subProperty=o,this.keyProperty=l,this.tag=null,this.paused=!1,this.parent=u,this.rendered=new Promise(function(e,t){Object.defineProperty(c,"renderComplete",{configurable:!1,writable:!0,value:e})}),this.willReRender=!1,this.args.___before(function(e,t,r,n,i){"bindTo"!=t&&(c.paused=!0)}),this.args.___after(function(e,t,r,n,i){"bindTo"!=t&&(c.paused=r.length>1,c.reRender())});var h=this.args.value.bindTo(function(e,t,r,n){if(!c.paused){var i=t;if("symbol"!==s(t))if(isNaN(t)&&(i="_"+t),n)for(var o in c.views[i]&&c.views[i].remove(),delete c.views[i],c.views)c.views[o].args[c.keyProperty]="string"!=typeof o?o:o.substr(1);else c.views[i]||c.willReRender?c.views[i]&&c.views[i].args&&(c.views[i].args[c.keyProperty]=t,c.views[i].args[c.subProperty]=e):(cancelAnimationFrame(c.willReRender),c.willReRender=requestAnimationFrame(function(){c.reRender()}))}});this._onRemove.add(h)}var r,a,c;return r=t,(a=[{key:"render",value:function(e){var t,r=this,n=[],i=o(this.views);try{var a=function(){var r=t.value;r.render(e),n.push(r.rendered.then(function(){return r}))};for(i.s();!(t=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}this.tag=e,Promise.all(n).then(function(e){return r.renderComplete(e)})}},{key:"reRender",value:function(){var e=this;if(!this.paused&&this.tag){var t=[];for(var r in this.views)t[r]=this.views[r];var n=[];this.upDebind&&this.upDebind.map(function(e){return e&&e()}),this.downDebind&&this.downDebind.map(function(e){return e&&e()}),this.upDebind=[],this.downDebind=[];var i=1/0,o=1/0,a=function(r){var a=!1,s=r;isNaN(s)?s="_"+r:String(s).length&&(s=Number(s));for(var u=t.length-1;u>=0;u--)if(t[u]&&void 0!==e.args.value[r]&&e.args.value[r]===t[u].args[e.subProperty]){a=!0,n[s]=t[u],isNaN(s)||(i=Math.min(i,s),s>0&&(o=Math.min(o,s))),n[s].args[e.keyProperty]=r,delete t[u];break}if(!a){var c={},l=n[s]=new e.viewClass(c,e.parent);isNaN(s)||(i=Math.min(i,s),s>0&&(o=Math.min(o,s))),n[s].template=(e.template,Object,e.template),n[s].viewList=e,n[s].args[e.keyProperty]=r,n[s].args[e.subProperty]=e.args.value[r],e.upDebind[s]=c.bindTo(e.subProperty,function(t,r,n,i){var o=c[e.keyProperty];i?delete e.args.value[o]:e.args.value[o]=t}),e.downDebind[s]=e.subArgs.bindTo(function(e,t,r,n){n?delete c[t]:c[t]=e}),l.onRemove(function(){e.upDebind[s]&&e.upDebind[s](),e.downDebind[s]&&e.downDebind[s](),delete e.downDebind[s],delete e.upDebind[s]}),e._onRemove.add(function(){e.upDebind.filter(function(e){return e}).map(function(e){return e()}),e.upDebind.splice(0)}),e._onRemove.add(function(){e.downDebind.filter(function(e){return e}).map(function(e){return e()}),e.downDebind.splice(0)}),c[e.subProperty]=e.args.value[r]}};for(var s in this.args.value)a(s);for(var u in t){var c=!1;for(var l in n)if(t[u]===n[l]){c=!0;break}c||t[u].remove()}if(Array.isArray(this.args.value)){var f=0===i&&void 0!==n[1]&&n.length>1||o===1/0?i:o;this.rendered=function t(){for(var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=n.length-r-1;i>f&&void 0===n[i];)i--;return i<f?Promise.resolve():n[i]===e.views[i]?n[i].firstNode?t(Number(r)+1):(n[i].render(e.tag,n[i+1]),n[i].rendered.then(function(){return t(Number(r)+1)})):(n[i].render(e.tag,n[i+1]),e.views.splice(i,0,n[i]),n[i].rendered.then(function(){return t(Number(r)+1)}))}()}else{var h=[],d=Object.assign({},n),v=function(t){if(delete d[t],n[t].firstNode&&n[t]===e.views[t])return"continue";n[t].render(e.tag),h.push(n[t].rendered.then(function(){return n[t]}))};for(var p in n)v(p);for(var y in d)delete this.args.views[y],d.remove();this.rendered=Promise.all(h)}for(var m in this.views=n,n)isNaN(m)?n[m].args[this.keyProperty]=m.substr(1):n[m].args[this.keyProperty]=m;this.willReRender=!1}}},{key:"pause",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];for(var t in this.views)this.views[t].pause(e)}},{key:"onRemove",value:function(e){this._onRemove.add(e)}},{key:"remove",value:function(){for(var t in this.views)this.views[t].remove();var r=this._onRemove.items();for(var n in r)this._onRemove.remove(r[n]),r[n]();for(;this.cleanup.length;)this.cleanup.pop()();for(this.views=[];this.tag&&this.tag.firstChild;)this.tag.removeChild(this.tag.firstChild);this.subArgs&&e.Bindable.clearBindings(this.subArgs),e.Bindable.clearBindings(this.args),this.args.value&&!this.args.value.isBound()&&e.Bindable.clearBindings(this.args.value),this.removed=!0}}])&&u(r.prototype,a),c&&u(r,c),t}();t.ViewList=c}()}),require.register("curvature/input/Keyboard.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Keyboard=void 0;var e=r("../base/Bindable");function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}var o=function(){function t(){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxDecay=120,this.comboTime=500,this.listening=!1,this.focusElement=document.body,Object.defineProperty(this,"combo",{value:e.Bindable.make([])}),Object.defineProperty(this,"whichs",{value:e.Bindable.make({})}),Object.defineProperty(this,"codes",{value:e.Bindable.make({})}),Object.defineProperty(this,"keys",{value:e.Bindable.make({})}),Object.defineProperty(this,"pressedWhich",{value:e.Bindable.make({})}),Object.defineProperty(this,"pressedCode",{value:e.Bindable.make({})}),Object.defineProperty(this,"pressedKey",{value:e.Bindable.make({})}),Object.defineProperty(this,"releasedWhich",{value:e.Bindable.make({})}),Object.defineProperty(this,"releasedCode",{value:e.Bindable.make({})}),Object.defineProperty(this,"releasedKey",{value:e.Bindable.make({})}),Object.defineProperty(this,"keyRefs",{value:e.Bindable.make({})}),document.addEventListener("keyup",function(e){r.listening&&(r.focusElement&&document.activeElement!==r.focusElement||(e.preventDefault(),r.releasedWhich[e.which]=Date.now(),r.releasedCode[e.code]=Date.now(),r.releasedKey[e.key]=Date.now(),r.whichs[e.which]=-1,r.codes[e.code]=-1,r.keys[e.key]=-1))}),document.addEventListener("keydown",function(e){r.listening&&(r.focusElement&&document.activeElement!==r.focusElement||(e.preventDefault(),e.repeat||(r.combo.push(e.code),clearTimeout(r.comboTimer),r.comboTimer=setTimeout(function(){return r.combo.splice(0)},r.comboTime),r.pressedWhich[e.which]=Date.now(),r.pressedCode[e.code]=Date.now(),r.pressedKey[e.key]=Date.now(),r.keys[e.key]>0||(r.whichs[e.which]=1,r.codes[e.code]=1,r.keys[e.key]=1))))});var n=function(e){for(var t in r.keys)r.keys[t]<0||(r.releasedKey[t]=Date.now(),r.keys[t]=-1);for(var n in r.codes)r.codes[n]<0||(r.releasedCode[n]=Date.now(),r.codes[n]=-1);for(var i in r.whichs)r.whichs[i]<0||(r.releasedWhich[i]=Date.now(),r.whichs[i]=-1)};window.addEventListener("blur",n),window.addEventListener("visibilitychange",function(){"visible"!==document.visibilityState&&n()})}return i(t,null,[{key:"get",value:function(){return this.instance=this.instance||e.Bindable.make(new this)}}]),i(t,[{key:"getKeyRef",value:function(t){return this.keyRefs[t]=this.keyRefs[t]||e.Bindable.make({})}},{key:"getKeyTime",value:function(e){var t=this.releasedKey[e],r=this.pressedKey[e];return r?!t||t<r?Date.now()-r:-1*(Date.now()-t):0}},{key:"getCodeTime",value:function(e){var t=this.releasedCode[e],r=this.pressedCode[e];return r?!t||t<r?Date.now()-r:-1*(Date.now()-t):0}},{key:"getWhichTime",value:function(e){var t=this.releasedWhich[e],r=this.pressedWhich[e];return r?!t||t<r?Date.now()-r:-1*(Date.now()-t):0}},{key:"getKey",value:function(e){return this.keys[e]?this.keys[e]:0}},{key:"getKeyCode",value:function(e){return this.codes[e]?this.codes[e]:0}},{key:"update",value:function(){for(var e in this.keys)this.keys[e]>0?this.keys[e]++:this.keys[e]>-this.maxDecay?this.keys[e]--:delete this.keys[e];for(var e in this.codes){var t=this.releasedCode[e],r=this.pressedCode[e],n=this.getKeyRef(e);if(this.codes[e]>0){if(n.frames=this.codes[e]++,n.time=r?Date.now()-r:0,n.down=!0,!t||t<r)return;return-1*(Date.now()-t)}this.codes[e]>-this.maxDecay?(n.frames=this.codes[e]--,n.time=t-Date.now(),n.down=!1):(n.frames=0,n.time=0,n.down=!1,delete this.codes[e])}for(var e in this.whichs)this.whichs[e]>0?this.whichs[e]++:this.whichs[e]>-this.maxDecay?this.whichs[e]--:delete this.whichs[e]}}]),t}();t.Keyboard=o}()}),require.register("curvature/mixin/EventTargetMixin.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventTargetMixin=void 0;var e,n=r("../base/Mixin");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=Symbol("Target"),a=(i(e={},n.Mixin.Constructor,function(){try{this[o]=new EventTarget}catch(e){this[o]=document.createDocumentFragment()}}),i(e,"dispatchEvent",function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0];(e=this[o]).dispatchEvent.apply(e,r);var a="on".concat(i.type[0].toUpperCase()+i.type.slice(1));return"function"==typeof this[a]&&this[a](i),i.returnValue}),i(e,"addEventListener",function(){var e;(e=this[o]).addEventListener.apply(e,arguments)}),i(e,"removeEventListener",function(){var e;(e=this[o]).removeEventListener.apply(e,arguments)}),e);t.EventTargetMixin=a}()}),require.register("curvature/mixin/PromiseMixin.js",function(t,r,n){r=e(r,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseMixin=void 0;var e,n=r("../base/Mixin");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=Symbol("Promise"),a=Symbol("Accept"),s=Symbol("Reject"),u=(i(e={},n.Mixin.Constructor,function(){var e=this;this[o]=new Promise(function(t,r){e[a]=t,e[s]=r})}),i(e,"then",function(){var e;return(e=this[o]).then.apply(e,arguments)}),i(e,"catch",function(){var e;return(e=this[o]).catch.apply(e,arguments)}),i(e,"finally",function(){var e;return(e=this[o]).finally.apply(e,arguments)}),e);t.PromiseMixin=u,Object.defineProperty(u,"Reject",{value:s}),Object.defineProperty(u,"Accept",{value:a})}()}),require.register("World.js",function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.World=void 0;var n=t("curvature/base/Bag"),i=t("curvature/base/Bindable"),o=t("tileMap/TileMap");function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"tileMap",new o.TileMap),this.viewports=new n.Bag(function(e,r,n){switch(n){case BAG.ITEM_ADDED:e.world=t;break;case BAG.ITEM_REMOVED:e.world=null}}),this.actors=new n.Bag(function(e,r,n){switch(n){case BAG.ITEM_ADDED:e.world=t;break;case BAG.ITEM_REMOVED:e.world=null}})}var t,r,i;return t=e,(r=[{key:"getOnScreenObjects",value:function(e){}},{key:"update",value:function(){}}])&&a(t.prototype,r),i&&a(t,i),e}();e.World=u,s(u,"globals",i.Bindable.make({}))}),require.register("actor/Actor.js",function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Actor=void 0;var i=t("curvature/base/View"),o=(t("../tileMap/TileMap"),t("../debug/PointDump"));function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,i=h(e);if(t){var o=h(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;return f(e)}(this,r)}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(v,i.View);var r,n,s,h=l(v);function v(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return d(f(e=h.call.apply(h,[this].concat(n))),"speed",15),d(f(e),"template",t("./actor.html")),e.world=null,e.x=92,e.y=1024,e.width=64,e.height=64,e.boxWidth=64,e.boxHeight=64,e.directions=16,e.state="standing",e.gSpeed=0,e.maxGSpeed=40,e.xSpeed=0,e.ySpeed=0,e.angle=0,e.maxGravity=48,e.gravity=0,e.slopeFactor=.01,e.falling=!0,e.sensors={top:!1,bottom:!1,left:!1,right:!1},e.mode=e.args.mode=0,e.modes={floor:0,leftWall:1,ceiling:2,rightWall:3},e.animationClasses={},e.currentClasses=null,e.pdL=new o.PointDump({color:"red"}),e.pdR=new o.PointDump({color:"green"}),e.args.debugs=[e.pdL,e.pdR],e}return r=v,(n=[{key:"destroy",value:function(){}},{key:"update",value:function(){if(this.tags.actor){var e=this.gSpeed;this.args.animspeed=Math.floor((this.maxGSpeed-Math.abs(e))/12),this.args.animspeed<1&&(this.args.animspeed=1);var t=Math.round(1e3*this.angle)/1e3;if(this.falling||(t>Math.PI/4&&t<2*Math.PI/4&&(this.mode===this.modes.floor?this.args.mode=this.mode=this.modes.leftWall:this.mode===this.modes.leftWall?this.args.mode=this.mode=this.modes.ceiling:this.mode===this.modes.ceiling?this.args.mode=this.mode=this.modes.rightWall:this.mode===this.modes.rightWall&&(this.args.mode=this.mode=this.modes.floor)),t<-Math.PI/4&&t>-2*Math.PI/4&&(this.mode===this.modes.floor?this.args.mode=this.mode=this.modes.rightWall:this.mode===this.modes.rightWall?this.args.mode=this.mode=this.modes.ceiling:this.mode===this.modes.ceiling?this.args.mode=this.mode=this.modes.leftWall:this.mode===this.modes.leftWall&&(this.args.mode=this.mode=this.modes.floor))),this.falling?(this.falling||this.jumped)&&(this.args.state="jumping"):(Math.abs(e)>this.maxGSpeed/2?this.args.state="running":Math.abs(e)>0?this.args.state="walking":this.args.state="standing",this.args.facing=e>0?"facing-right":"facing-left"),this.falling?this.mode==this.modes.floor?this.ySpeed++:this.mode==this.modes.ceiling?this.ySpeed--:this.mode==this.modes.leftWall?this.xSpeed--:this.mode==this.modes.rightWall&&this.xSpeed++:this.jumped||(this.xSpeed=0,this.ySpeed=0),this.x+=this.xSpeed,this.ySpeed&&(this.y+=this.ySpeed>0?1:-1),e)for(var r=Math.abs(e),n=r>8?8:r,i=0;i<n;i++)this.iteratePosition(Math.floor(e/n));else this.iteratePosition(0);this.ySpeed>32&&(this.ySpeed=32),this.ySpeed<-32&&(this.ySpeed=-32),this.xSpeed>32&&(this.xSpeed=32),this.xSpeed<-32&&(this.xSpeed=-32),this.tags.actor.style({"--x":Math.floor(this.x),"--y":Math.floor(this.y)}),this.mode===this.modes.floor?this.tags.actor.style({"--angle":this.angle}):this.mode===this.modes.leftWall?this.tags.actor.style({"--angle":this.angle+Math.PI/2*1}):this.mode===this.modes.ceiling?this.tags.actor.style({"--angle":this.angle+Math.PI/2*2}):this.mode===this.modes.rightWall&&this.tags.actor.style({"--angle":this.angle+Math.PI/2*3}),this.jumped&&(this.jumped=!1)}}},{key:"iteratePosition",value:function(e){var t,r,n,i,o=Math.sin(this.angle),s=Math.cos(this.angle),u=this.center,c=(this.top,this.bottom),l=(this.left,this.right);this.mode==this.modes.floor||this.mode==this.modes.ceiling?(t=l-u[0],u[1]):this.mode!=this.modes.leftWall&&this.mode!=this.modes.rightWall||(t=l-u[1],u[0]),r=this.left-t*o+.5*t,n=this.right-t*o-.5*t,i=Math.abs(n-r);var f,h,d,v,p=this.viewport.tileMap,y=0,m=0,b=!1,g=!1,w=(this.falling,this.height),k=[[-w,0],[-w,w]];e:for(var _ in k)for(y=k[_][0];y<k[_][1];){this.mode==this.modes.floor?(f=r,h=c+y):this.mode==this.modes.ceiling?(f=r,h=c-y):this.mode==this.modes.leftWall?(f=c-y,h=r):this.mode==this.modes.rightWall&&(f=c+y,h=r);var S=p.coordsToTile(f,h),O=p.getTileNumber.apply(p,a(S));if(!1===O)break;if(b=p.getSolid(O,f,h)){if(0!==y)break e;break}y++}for(var j in k)for(m=k[j][0];m<k[j][1];){this.mode==this.modes.floor?(d=n,v=c+m):this.mode==this.modes.ceiling?(d=n,v=c-m):this.mode==this.modes.leftWall?(d=c-m,v=n):this.mode==this.modes.rightWall&&(d=c+m,v=n);var P=p.coordsToTile(d,v),T=p.getTileNumber.apply(p,a(P));if(!1===T)break;if(g=p.getSolid(T,d,v))break;m++}if(this.pdL.args.x=f,this.pdL.args.y=h,this.pdR.args.x=d,this.pdR.args.y=v,this.angle=Math.atan((m-y)/i),!this.falling){var A=(y+m)/2;this.mode===this.modes.floor?(this.x+=e*s,this.y+=e*o):this.mode===this.modes.rightWall?(this.x+=e*o,this.y-=e*s):this.mode===this.modes.ceiling?(this.x-=e*s,this.y-=e*o):this.mode===this.modes.leftWall&&(this.x-=e*o,this.y+=e*s),b&&g&&y<=0&&m<=0&&(this.mode==this.modes.floor?this.y+=Math.ceil(A):this.mode==this.modes.ceiling?this.y-=Math.ceil(A):this.mode==this.modes.leftWall?this.x-=A:this.mode==this.modes.rightWall&&(this.x+=A))}y>0&&m>0?(console.log(y,m),this.falling=!0):(console.log(y,m),this.falling=!1)}},{key:"isColliding",value:function(e){}},{key:"animate",value:function(e){}},{key:"animate",value:function(){this.animationClasses[animation]&&this.currentClasses!=this.animationClasses[animation]&&(this.currentClasses.map(function(e){this.tags.sprite.removeClass(e)}),this.animationClasses[animation].map(function(e){this.tags.sprite.addClass(e)}),this.currentClasses=this.animationClasses[animation])}},{key:"roundAngle",value:function(e,t){return 360*"Math.round"((e=Math.round(e*(180/Math.PI)))/(360/t))/t*(Math.PI/180)}},{key:"goLeft",value:function(){this.gSpeed>0&&(this.gSpeed=0),this.gSpeed>-this.maxGSpeed&&this.gSpeed--}},{key:"goRight",value:function(){this.gSpeed<0&&(this.gSpeed=0),this.gSpeed<this.maxGSpeed&&this.gSpeed++}},{key:"slowDown",value:function(){Math.abs(this.gSpeed)>32?this.gSpeed=.95*this.gSpeed:this.gSpeed=.75*this.gSpeed,Math.abs(this.gSpeed)<=.1&&(this.gSpeed=0)}},{key:"jump",value:function(){var e;this.falling||(this.falling=!0,this.jumped=!0,this.mode=this.args.mode=this.modes.floor,this.mode===this.modes.floor?e=this.angle:this.mode===this.modes.leftWall?e=this.angle+Math.PI/2*1:this.mode===this.modes.ceiling?e=this.angle+Math.PI/2*2:this.mode===this.modes.rightWall&&(e=this.angle+Math.PI/2*3),this.angle=0,this.ySpeed=20*-Math.cos(e),this.xSpeed=20*Math.sin(e),this.mode!==this.modes.leftWall&&this.mode!==this.modes.rightWall||(this.gSpeed=0))}},{key:"center",get:function(){return[this.x+this.boxWidth/2,this.y+this.boxHeight/2]}},{key:"left",get:function(){return this.mode==this.modes.floor?this.center[0]-this.width/2:this.mode==this.modes.ceiling?this.center[0]+this.width/2:this.mode==this.modes.leftWall?this.center[1]-this.width/2:this.mode==this.modes.rightWall?this.center[1]+this.width/2:void 0}},{key:"right",get:function(){return this.mode==this.modes.floor?this.center[0]+this.width/2:this.mode==this.modes.ceiling?this.center[0]-this.width/2:this.mode==this.modes.leftWall?this.center[1]+this.width/2:this.mode==this.modes.rightWall?this.center[1]-this.width/2:void 0}},{key:"top",get:function(){return this.mode==this.modes.floor?this.center[1]-Math.floor(this.height/2):this.mode==this.modes.ceiling?this.center[1]+Math.floor(this.height/2):this.mode==this.modes.leftWall?this.center[0]+Math.floor(this.height/2):this.mode==this.modes.rightWall?this.center[0]-Math.floor(this.height/2):void 0}},{key:"bottom",get:function(){return this.mode==this.modes.floor?this.center[1]+Math.floor(this.height/2):this.mode==this.modes.ceiling?this.center[1]-Math.floor(this.height/2):this.mode==this.modes.leftWall?this.center[0]-Math.floor(this.height/2):this.mode==this.modes.rightWall?this.center[0]+Math.floor(this.height/2):void 0}}])&&u(r.prototype,n),s&&u(r,s),v}();e.Actor=v}),require.register("actor/PointActor.js",function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.PointActor=void 0;var i=t("curvature/base/View");function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,i=f(e);if(t){var o=f(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;return l(e)}(this,r)}}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=0,d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(f,i.View);var t,r,n,a=c(f);function f(){var e,t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=a.call.apply(a,[this].concat(o)),t=l(e),n='<div\n\t\tclass = "point-actor"\n\t\tstyle = "--x:[[x]];--y:[[y]];--angle:[[angle]]"\n\n\t\tdata-angle = "[[angle|rad2deg]]"\n\t\tdata-mode  = "[[mode]]"\n\t></div>',(r="template")in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,e.args.x=e.args.x||1278,e.args.y=e.args.y||256,e.args.maxGSpeed=10,e.args.gSpeed=0,e.args.xSpeed=0,e.args.ySpeed=5,e.args.maxFall=500,e.maxStep=4,e.backStep=0,e.frontStep=0,e.args.falling=!1,e.args.mode=h,e.xAxis=0,e.yAxis=0,e}return t=f,(r=[{key:"update",value:function(){var e=this,t=this.args.maxGSpeed;this.xAxis>0?this.args.gSpeed<t&&this.args.gSpeed++:this.xAxis<0?this.args.gSpeed>-t&&this.args.gSpeed--:this.args.gSpeed>0?this.args.gSpeed--:this.args.gSpeed<0&&this.args.gSpeed++,this.goHorizontal(this.args.gSpeed,-this.frontStep),this.args.ySpeed<this.args.maxFall&&this.args.ySpeed++,this.running?this.args.maxGSpeed=50:this.args.maxGSpeed=10;var r,n,i=this.viewport.tileMap;switch(this.args.mode){case h:r=[0,1];break;case 3:r=[1,0];break;case 2:r=[0,-1];break;case 1:r=[-1,0]}if(!1===this.castRay(this.args.ySpeed,this.downAngle,r,function(t,r){var n=i.coordsToTile.apply(i,o(r)),a=i.getTileNumber.apply(i,o(n));if(a&&i.getSolid.apply(i,[a].concat(o(r)))){switch(e.args.mode){case h:e.args.y+=t;break;case 3:e.args.x+=t;break;case 2:e.args.y-=t;break;case 1:e.args.x-=t}return e.args.x=Math.floor(e.args.x),e.args.y=Math.floor(e.args.y),t}}))switch(this.args.falling=!0,this.args.mode){case h:this.args.y+=this.args.ySpeed,this.args.x+=this.args.xSpeed;break;case 3:this.args.x+=this.args.ySpeed,this.args.y-=this.args.xSpeed;break;case 2:this.args.y-=this.args.ySpeed,this.args.x-=this.args.xSpeed;break;case 1:this.args.x-=this.args.ySpeed,this.args.y+=this.args.xSpeed}else this.args.falling=!1;switch(n=this.args.gSpeed>0?1+this.args.gSpeed:this.args.gSpeed<0?-1+this.args.gSpeed:2,this.args.mode){case h:case 1:this.backStep=this.findStepHeight(-n),this.frontStep=this.findStepHeight(n);break;case 3:case 2:this.backStep=this.findStepHeight(n),this.frontStep=this.findStepHeight(-n)}if(this.args.angle=Math.atan(((this.frontStep||0)-(this.backStep||0))/(2*n)),this.backStep>0||this.frontStep>0){if(this.args.angle>Math.PI/4)switch(this.args.mode){case h:this.args.mode=3;break;case 3:this.args.mode=2;break;case 2:this.args.mode=1;break;case 1:this.args.mode=h}if(this.args.angle<-Math.PI/4)switch(this.args.mode){case h:this.args.mode=1;break;case 3:this.args.mode=h;break;case 2:this.args.mode=3;break;case 1:this.args.mode=2}}}},{key:"findStepHeight",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=this.viewport.tileMap,n=this.maxStep*Math.abs(t);switch(this.args.mode){case h:e=[t,-n];break;case 3:e=[-n,t];break;case 2:e=[t,n];break;case 1:e=[n,t]}return this.castRay(2*n,this.downAngle,e,function(e,t){var i=r.coordsToTile.apply(r,o(t)),a=r.getTileNumber.apply(r,o(i));if(a)return r.getSolid.apply(r,[a].concat(o(t)))?1+n-e:void 0})}},{key:"castRay",value:function(){for(var e=1,t=function(){},r=Math.PI/2,n=[0,0],i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];switch(o.length){case 2:e=o[0],t=o[1];break;case 3:e=o[0],r=o[1],t=o[2];break;case 4:e=o[0],r=o[1],n=o[2],t=o[3]}for(var s=0;s<Math.floor(e);s++){var u=t(s,[this.x+n[0]+s*Math.cos(r),this.y+n[1]+s*Math.sin(r)]);if(void 0!==u)return u}return!1}},{key:"jump",value:function(){this.args.falling||(this.args.xSpeed=15*Math.cos(this.args.angle+Math.PI/2),this.args.ySpeed=-15*Math.sin(this.args.angle+Math.PI/2)),this.args.falling=!0}},{key:"goRight",value:function(){this.args.gSpeed>=this.args.maxGSpeed||this.args.gSpeed++}},{key:"goLeft",value:function(){this.args.gSpeed<=-this.args.maxGSpeed||this.args.gSpeed--}},{key:"goHorizontal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!(t&&Math.abs(t)>Math.abs(this.maxStep*this.args.gSpeed)))switch(this.args.mode){case h:this.args.x+=e,this.args.y+=t;break;case 3:this.args.x+=t,this.args.y-=e;break;case 2:this.args.x-=e,this.args.y-=t;break;case 1:this.args.x-=t,this.args.y+=e}}},{key:"goUp",value:function(){this.args.ySpeed=-2}},{key:"goDown",value:function(){this.args.y++}},{key:"rad2deg",value:function(e){var t=180/Math.PI*e;return t>0?Math.floor(10*t)/10:Math.ceil(10*t)/10}},{key:"downAngle",get:function(){switch(this.args.mode){case h:return Math.PI/2;case 3:return 0;case 2:return-Math.PI/2;case 1:return Math.PI}}},{key:"upAngle",get:function(){switch(this.args.mode){case h:return-Math.PI/2;case 3:return Math.PI;case 2:return Math.PI/2;case 1:return 0}}},{key:"x",get:function(){return this.args.x}},{key:"y",get:function(){return this.args.y}},{key:"point",get:function(){return[this.args.x,this.args.y]}}])&&s(t.prototype,r),n&&s(t,n),f}();e.PointActor=d}),require.register("actor/Walker.js",function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Walker=void 0;var i=t("./Actor");function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(r,i.Actor);var t=a(r);function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t.apply(this,arguments)}return r}();e.Walker=u}),require.register("actor/actor.html",function(e,t,r){r.exports='<div class = "actor knuckles [[state]] [[facing]]" cv-ref = "actor" data-mode = "[[mode]]" style = "--animspeed:[[animspeed]]">\n\t<div class = "sprite" cv-ref = "sprite" ></div>\n</div>\n<div cv-each = "debugs:debug">[[debug]]</div>\n'}),require.register("debug/LineDump.js",function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.LineDump=void 0;var i=t("curvature/base/View");function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,i=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;return s(e)}(this,r)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(r,i.View);var t=a(r);function r(){var e,n,i,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var a=arguments.length,u=new Array(a),c=0;c<a;c++)u[c]=arguments[c];return e=t.call.apply(t,[this].concat(u)),n=s(e),o='<div class = "line-dump" style = "--x:[[x]];--y:[[y]];--length:[[len]];--angle:[[angle]]">\n\t\t<div class = "line" style = "border-color:[[color]]"></div>\n\t</div>',(i="template")in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,e.args.x=e.args.x||0,e.args.y=e.args.y||0,e}return r}();e.LineDump=c}),require.register("debug/PointDump.js",function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.PointDump=void 0;var i=t("curvature/base/View");function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,i=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;return s(e)}(this,r)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(r,i.View);var t=a(r);function r(){var e,n,i,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var a=arguments.length,u=new Array(a),c=0;c<a;c++)u[c]=arguments[c];return e=t.call.apply(t,[this].concat(u)),n=s(e),o='<div class = "point-dump" style = "--x:[[x]];--y:[[y]];">\n\t\t<div class = "point" style = "--color:[[color]]"></div>\n\t</div>',(i="template")in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,e.args.x=e.args.x||0,e.args.y=e.args.y||0,e}return r}();e.PointDump=c}),require.register("initialize.js",function(e,t,r){"use strict";t("./tileMap/TileMap");var n=new(t("./viewport/Viewport").Viewport);document.addEventListener("DOMContentLoaded",function(){n.render(document.body);var e=Date.now();Promise.all([n.tileMap.ready]).then(function(){n.update();!function t(){Date.now()-e>=1&&(n.update(),e=Date.now()),requestAnimationFrame(t)}()})})}),require.register("tileMap/TileMap.js",function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.TileMap=void 0;var i=t("curvature/base/Tag"),o=t("curvature/base/View");function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,i=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l={height:50,layers:[{data:[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,14,13,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,19,18,2,2,2,2,2,2,2,2,2,10,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,17,2,2,2,2,2,2,2,10,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,17,2,2,2,2,2,10,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,17,2,2,2,11,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,21,2,2,12,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,20,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,26,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,25,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,26,2,2,2,6,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,25,2,2,2,7,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,24,2,2,2,2,2,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,24,2,2,2,2,2,2,2,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,24,2,2,2,2,2,2,2,2,2,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,27,28,2,2,2,2,2,2,2,2,2,2,2,4,5,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,27,28,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],height:50,name:"Tile Layer 1",opacity:1,type:"tilelayer",visible:!0,width:50,x:0,y:0}],orientation:"orthogonal",properties:{},renderorder:"right-down",tileheight:32,tilesets:[{firstgid:1,image:"../Sonic/testTiles2.png",imageheight:128,imagewidth:224,margin:0,name:"Shapes",properties:{},spacing:0,tileheight:32,tilewidth:32}],tilewidth:32,version:1,width:50},f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(f,o.View);var t,r,n,c=u(f);function f(e,t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(r=c.call(this,e,t)).heightMask=null;var n=new Image;return r.mapData=l,r.ready=new Promise(function(e){n.addEventListener("load",function(t){r.width=n.width,r.height=n.height;var o=new i.Tag("<canvas>");o.width=n.width,o.height=n.height,o.getContext("2d").drawImage(n,0,0,r.width,r.height),r.heightMask=o,e()}),n.src="/Sonic/testTiles2.png"}),r}return t=f,(r=[{key:"coordsToTile",value:function(e,t){return[Math.floor(e/this.blockSize),Math.floor(t/this.blockSize)]}},{key:"getTileNumber",value:function(e,t){if(this.tileNoCache=this.tileNoCache||{},this.tileNoCache[e]=this.tileNoCache[e]||{},void 0!==this.tileNoCache[e][t])return this.tileNoCache[e][t];if(e>=this.mapData.width||t>=this.mapData.height||e<0||t<0)return this.tileNoCache[e][t]=!1;var r=t*this.mapData.width+e;return void 0!==this.mapData.layers[0].data[r]?this.tileNoCache[e][t]=this.mapData.layers[0].data[r]-1:this.tileNoCache[e][t]=!1}},{key:"getTile",value:function(e){var t=0,r=0;if(e){var n=Math.ceil(this.width/32);t=e%n,r=Math.floor(e/n)}return[t,r]}},{key:"getSolid",value:function(e,t,r){var n=this;if(0===e)return!1;if(1===e)return!0;var i=this.getTile(e).map(function(e){return e*n.blockSize}),o=Math.floor(Number(t)%this.blockSize),a=Math.floor(Number(r)%this.blockSize);if(void 0!==this.heightMaskCache&&void 0!==this.heightMaskCache[e]&&void 0!==this.heightMaskCache[e][o]&&void 0!==this.heightMaskCache[e][o][a])return this.heightMaskCache[e][o][a];if(this.heightMask){var s=i[0]+o,u=i[1]+a;return this.heightMaskCache||(this.heightMaskCache={}),this.heightMaskCache[e]||(this.heightMaskCache[e]={}),this.heightMaskCache[e][o]||(this.heightMaskCache[e][o]={}),this.heightMaskCache[e][o][a]=!1,0===this.heightMask.getContext("2d").getImageData(s,u,1,1).data[0]&&(this.heightMaskCache[e][o][a]=!0),this.heightMaskCache[e][o][a]}return!1}},{key:"blockSize",get:function(){return this.mapData.tilewidth}}])&&a(t.prototype,r),n&&a(t,n),f}();e.TileMap=f}),require.register("viewport/Camera.js",function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(e,"__esModule",{value:!0}),e.Camera=void 0;e.Camera=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,"x",0),n(this,"y",0)}}),require.register("viewport/Viewport.js",function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Viewport=void 0;var i=t("curvature/base/Bag"),o=t("curvature/base/Tag"),a=t("curvature/base/View"),s=t("curvature/input/Keyboard"),u=t("./Camera"),c=(t("../actor/Actor"),t("../actor/PointActor")),l=t("../tileMap/TileMap");t("../debug/PointDump");function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,i=p(e);if(t){var o=p(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;return v(e)}(this,r)}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(m,a.View);var r,n,p,y=d(m);function m(e,r){var n,o,a,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),n=y.call(this,e,r),o=v(n),a="template",s=t("./viewport.html"),a in o?Object.defineProperty(o,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[a]=s,n.camera=new u.Camera,n.sprites=new i.Bag,n.tileMap=new l.TileMap,n.world=null,n.args.blockSize=32,n.args.width=288,n.args.height=192,n.args.x=0,n.args.y=0,n.args.offsetX=0,n.args.offsetY=0,n.blocksXY={};var f=new c.PointActor;return f.viewport=v(n),n.args.actors=[f],n.blocks=new i.Bag,n.args.blocks=n.blocks.list,n}return r=m,(n=[{key:"onAttached",value:function(e){s.Keyboard.get().listening=!0}},{key:"mousemove",value:function(e){}},{key:"update",value:function(){for(var e in s.Keyboard.get().getKey(" ")>0&&this.args.actors[0].jump(),s.Keyboard.get().getKey("Control")>0?this.args.actors[0].running=!0:this.args.actors[0].running=!1,s.Keyboard.get().getKey("ArrowLeft")>0?this.args.actors[0].xAxis=-1:s.Keyboard.get().getKey("ArrowRight")>0?this.args.actors[0].xAxis=1:this.args.actors[0].xAxis=0,this.args.actors)this.args.actors[e].update();this.args.actors[0].angle;this.args.x=160-this.args.actors[0].x,this.args.y=128-this.args.actors[0].y,this.args.x>0&&(this.args.x=0),this.args.y>0&&(this.args.y=0);for(var t=Math.ceil(this.args.width/this.args.blockSize),r=Math.ceil(this.args.height/this.args.blockSize),n=-1;n<=t+1;n++)for(var i=-1;i<=r+1;i++){this.blocksXY[n]||(this.blocksXY[n]={}),this.blocksXY[n][i]||(this.blocksXY[n][i]=new o.Tag("<div>"));var a=this.blocksXY[n][i],u=this.tileMap.getTileNumber(this.args.offsetX+n-Math.ceil(this.args.x/this.args.blockSize)+0,this.args.offsetY+i-Math.ceil(this.args.y/this.args.blockSize)+0),c=this.tileMap.getTile(u);if(!this.blocks.has(a)){a.style({width:this.args.blockSize+"px",height:this.args.blockSize+"px"});var l=this.args.blockSize*n+this.args.offsetX*this.args.blockSize%this.args.blockSize,f=this.args.blockSize*i+this.args.offsetY*this.args.blockSize%this.args.blockSize;a.style({transform:"translate(".concat(l,"px, ").concat(f,"px)"),"background-image":"url(/Sonic/testTiles2.png)","background-position":c[0]*this.args.blockSize*-1+"px "+c[1]*this.args.blockSize*-1+"px",position:"absolute",left:0,top:0}),this.blocks.add(a)}a.style({"background-position":c[0]*this.args.blockSize*-1+"px "+c[1]*this.args.blockSize*-1+"px"})}this.tags.viewport.style({"--x":Math.round(this.args.x),"--y":Math.round(this.args.y),"--xMod":Math.round(this.args.x%this.args.blockSize),"--yMod":Math.round(this.args.y%this.args.blockSize),"--width":this.args.width,"--height":this.args.height})}},{key:"screenBox",value:function(){return[this.camera.x-Math.floor(this.width/2),this.camera.y-Math.floor(this.height/2),this.camera.x+Math.ceil(this.width/2),this.camera.y+Math.ceil(this.height/2)]}}])&&f(r.prototype,n),p&&f(r,p),m}();e.Viewport=y}),require.register("viewport/viewport.html",function(e,t,r){r.exports='<div class = "viewport" cv-ref = "viewport" cv-on = "mousemove(event)">\n\t<div class = "viewport-background" cv-each = "blocks:block:b" cv-ref = "background">[[block]]</div>\n\t<div class = "viewport-content" cv-each = "actors:actor:a">[[actor]]</div>\n</div>\n'}),require.register("___globals___",function(e,t,r){})}(),require("___globals___");
